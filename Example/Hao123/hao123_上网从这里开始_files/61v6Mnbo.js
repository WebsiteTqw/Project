define(function(){var PlayerRuleCtrl=Backbone.Model.extend({defaults:{prebufferCount:0,firstBufferCount:0,exceptionCount:0,play60sCount:0,play100msCount:0,nolinkCount:0},playerRules:{},initialize:function(options){options=options||{};this.player=options.player||player;this.listCtrl=options.listCtrl||listCtrl;this.playListCtrl=this.listCtrl.get("playlist");this.PLAYRULES=options.PLAYRULES||{};this.PLAYCTRL=options.PLAYCTRL||{};this.initPlayRules()},initPlayRules:function(){var self=this;this.playerRules.prebuffer=new PlayEngineRules.Prebuffer({handler:function(){self.set("prebufferCount",self.get("prebufferCount")+1);self.trigger("playerRule:prebuffer",self);self.playListCtrl.next()},time:this.PLAYRULES.PREBUFTIME});this.playerRules.firstBuffer=new PlayEngineRules.FirstBuffer({handler:function(){self.set("firstBufferCount",self.get("firstBufferCount")+1);self.trigger("playerRule:firstBuffer",self);self.playListCtrl.next()},time:this.PLAYRULES.BUFTIME});this.playerRules.exception=new PlayEngineRules.Exception({handler:function(){self.set("exceptionCount",self.get("exceptionCount")+1);self.trigger("playerRule:exception",self);if(self.PLAYCTRL.PLAYERRSTOP&&self.get("exceptionCount")>self.PLAYCTRL.PLAYERRSTOP){self.playListCtrl.reset();self.player.reset()}else{self.playListCtrl.next()}},time:this.PLAYRULES.ERRTIME});this.playerRules.play60s=new PlayEngineRules.Play60s({handler:function(){self.set("play60sCount",self.get("play60sCount")+1);self.trigger("playerRule:play60s",self)},time:this.PLAYRULES.SAVETIME});this.playerRules.play100ms=new PlayEngineRules.Play100ms({handler:function(){self.set("play100msCount",self.get("play100msCount")+1);self.trigger("playerRule:play100ms",self)}});this.playerRules.noLink=new PlayEngineRules.NoLink({handler:function(){self.set("nolinkCount",self.get("nolinkCount")+1);self.trigger("playerRule:nolinkCount",self);if(self.get("nolinkCount")<self.PLAYRULES.ERRSTOP){self.playListCtrl.next()}}});this.playerRuleController=new PlayEngineRulesController({playEngine:this.player});_.each(this.playerRules,function(item){self.playerRuleController.addRule(item)})}});return PlayerRuleCtrl});
/** If u are interested in our code and would like to make it robust, just contact us^^  <enimong#gmail.com> **/
/** Generated by M3D. **/