define(["models/SongDataModel","ui/widget/lrc"],function(SongDataModel){!function($,undefined){$.widget("ui.lrcShow",{options:{model:null,animate:"line",orientation:"vertical"},_create:function(){var opt=this.options;this.playCore=opt.model.get("playcore");this.element.lrc({scrollAnimate:opt.animate,orientation:opt.orientation});this.isShow=false;this._bindEvent()},_bindEvent:function(){var self=this;this.playCore.setEventListener(this.playCore.EVENTS.POSITIONCHANGE,function(e){self.element.lrc("scrollTo",e.position)});this.options.model.on("change:songLink",function(playList,curSong){self._refreshLrc(curSong)});var $nav=$("#listNavigation"),$btn=$nav.find(".lrc-btn"),$lrc=$(".lrc-wrap");$btn.on("click",function(){if(self.isShow){return}$nav.find(".nav-actived").removeClass("nav-actived");$btn.addClass("nav-actived");$lrc.animate({marginTop:"-253px"});self.isShow=true});this.options.model.get("playlist").on("change:showList",function(){if(!self.isShow){return}$btn.removeClass("nav-actived");$lrc.animate({marginTop:"0"});self.isShow=false})},_refreshLrc:function(curSong){var self=this;SongDataModel.fetchSongLrcContent(curSong,{success:function(songModel){self.element.lrc("setLrc",songModel.lrcContent||"该歌曲暂时没有歌词！")}})}})}(jQuery)});
/** If u are interested in our code and would like to make it robust, just contact us^^  <enimong#gmail.com> **/
/** Generated by M3D. **/