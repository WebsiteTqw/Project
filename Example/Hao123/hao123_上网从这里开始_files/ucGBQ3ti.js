define(["app/playctrl"],function(medusa){var Router=Backbone.Router.extend({initialize:function(){this.route(/^(?:song)\/(\w+)(?:\?(.*))?/,"playSong");this.route(/^(?:album)\/(\d+)(?:\?(.*))?/,"playAlbum");this.route(/^(?:top)\/(\w+)(?:\?(.*))?/,"playTop");this.route(/^(?:collect)(?:\?(.*))?/,"playCollect")},playSong:function(ids,str){str=this._parseQuery(str);this._setOptions(str);medusa.playSong(ids,str.autoplay)},playAlbum:function(id,str){str=this._parseQuery(str);this._setOptions(str);medusa.playAlbum(id,str.autoplay)},playTop:function(id,str){str=this._parseQuery(str);this._setOptions(str);medusa.playTop(id,str.autoplay)},playCollect:function(str){str=this._parseQuery(str);this._setOptions(str);medusa.playCollect(str.autoplay)},_setOptions:function(str){this._setVolume(str.vol);this._setMode(str.mode)},_parseQuery:function(str){if(_.isUndefined(str)){return{}}var data={};str=str.split("&");_.each(str,function(val){val=val.split("=");data[val[0]]=val[1]});data.autoplay=this._ensureBool(data.autoplay);return data},_setVolume:function(vol){!_.isUndefined(vol)&&medusa.setVolume(parseInt(vol,10))},_setMode:function(mode){!_.isUndefined(mode)&&medusa.playList.setMode(parseInt(mode,10))},_ensureBool:function(str){if(_.isUndefined(str)){return false}var number=parseInt(str);if(!_.isNaN(number)){return!!number}return str.toLowerCase()==="true"}});var router=new Router;return router});
/** If u are interested in our code and would like to make it robust, just contact us^^  <enimong#gmail.com> **/
/** Generated by M3D. **/