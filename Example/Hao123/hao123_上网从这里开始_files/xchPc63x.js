define(["ui/widget/button"],function(){!function($,undefined){$.widget("ui.playctrlButton",{options:{model:null,button:["prev","play","next"]},_create:function(){this.playCore=this.options.model.get("playcore");this.playList=this.options.model.get("playlist");this.buttons={};this.isStop=true;this.keydowntime=null;this._createButton();this._bindEvent()},_createButton:function(){var self=this;_.each(this.options.button,function(val){self.buttons[val]=$('<li class="'+val+'"><span></span></li>');self.buttons[val].find("span").button();self.element.append(self.buttons[val])})},_bindEvent:function(){var self=this;_.each(this.buttons,function(val,key){self["_"+key+"Event"].call(self,val)});this.element.on("selectstart",function(){return false})},_prevEvent:function($button){var self=this;$button.on("click",function(){if(!self.keydowntime){self.playList.prev();self.keydowntime=setTimeout(function(){self.keydowntime=null},1e3)}})},_playEvent:function($button){var self=this;this.playCore.setEventListener(this.playCore.EVENTS.STATECHANGE,function(e){self.isStop=e.newState!=="play"&&e.newState!=="pre-buffer"&&e.newState!=="buffering";$button[self.isStop?"removeClass":"addClass"]("stop")});$button.on("click",function(){if(self.playList.getCurSongIndex()==-1){self.playList.next()}else{self.playCore[self.isStop?"play":"pause"]()}})},_nextEvent:function($button){var self=this;$button.on("click",function(){if(!self.keydowntime){self.playList.next();self.keydowntime=setTimeout(function(){self.keydowntime=null},1e3)}})}})}(jQuery)});
/** If u are interested in our code and would like to make it robust, just contact us^^  <enimong#gmail.com> **/
/** Generated by M3D. **/