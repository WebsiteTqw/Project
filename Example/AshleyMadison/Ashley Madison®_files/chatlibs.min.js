function hex_sha1(e){return binb2hex(core_sha1(str2binb(e),e.length*chrsz))}function b64_sha1(e){return binb2b64(core_sha1(str2binb(e),e.length*chrsz))}function str_sha1(e){return binb2str(core_sha1(str2binb(e),e.length*chrsz))}function hex_hmac_sha1(e,t){return binb2hex(core_hmac_sha1(e,t))}function b64_hmac_sha1(e,t){return binb2b64(core_hmac_sha1(e,t))}function str_hmac_sha1(e,t){return binb2str(core_hmac_sha1(e,t))}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc")}function core_sha1(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var n=Array(80),i=1732584193,s=-271733879,r=-1732584194,o=271733878,a=-1009589776,c=0;e.length>c;c+=16){for(var h=i,l=s,u=r,d=o,p=a,g=0;80>g;g++){n[g]=16>g?e[c+g]:rol(n[g-3]^n[g-8]^n[g-14]^n[g-16],1);var f=safe_add(safe_add(rol(i,5),sha1_ft(g,s,r,o)),safe_add(safe_add(a,n[g]),sha1_kt(g)));a=o,o=r,r=rol(s,30),s=i,i=f}i=safe_add(i,h),s=safe_add(s,l),r=safe_add(r,u),o=safe_add(o,d),a=safe_add(a,p)}return[i,s,r,o,a]}function sha1_ft(e,t,n,i){return 20>e?t&n|~t&i:40>e?t^n^i:60>e?t&n|t&i|n&i:t^n^i}function sha1_kt(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function core_hmac_sha1(e,t){var n=str2binb(e);n.length>16&&(n=core_sha1(n,e.length*chrsz));for(var i=Array(16),s=Array(16),r=0;16>r;r++)i[r]=909522486^n[r],s[r]=1549556828^n[r];var o=core_sha1(i.concat(str2binb(t)),512+t.length*chrsz);return core_sha1(s.concat(o),672)}function rol(e,t){return e<<t|e>>>32-t}function str2binb(e){for(var t=[],n=(1<<chrsz)-1,i=0;e.length*chrsz>i;i+=chrsz)t[i>>5]|=(e.charCodeAt(i/chrsz)&n)<<32-chrsz-i%32;return t}function binb2str(e){for(var t="",n=(1<<chrsz)-1,i=0;32*e.length>i;i+=chrsz)t+=String.fromCharCode(e[i>>5]>>>32-chrsz-i%32&n);return t}function binb2hex(e){for(var t=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;4*e.length>i;i++)n+=t.charAt(15&e[i>>2]>>8*(3-i%4)+4)+t.charAt(15&e[i>>2]>>8*(3-i%4));return n}function binb2b64(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",i=0;4*e.length>i;i+=3)for(var s=(255&e[i>>2]>>8*(3-i%4))<<16|(255&e[i+1>>2]>>8*(3-(i+1)%4))<<8|255&e[i+2>>2]>>8*(3-(i+2)%4),r=0;4>r;r++)n+=8*i+6*r>32*e.length?b64pad:t.charAt(63&s>>6*(3-r));return n.replace(/AAA\=(\=*?)$/,"$1")}function hex_md5(e){return binl2hex(core_md5(str2binl(e),e.length*chrsz))}function b64_md5(e){return binl2b64(core_md5(str2binl(e),e.length*chrsz))}function str_md5(e){return binl2str(core_md5(str2binl(e),e.length*chrsz))}function hex_hmac_md5(e,t){return binl2hex(core_hmac_md5(e,t))}function b64_hmac_md5(e,t){return binl2b64(core_hmac_md5(e,t))}function str_hmac_md5(e,t){return binl2str(core_hmac_md5(e,t))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,i=-271733879,s=-1732584194,r=271733878,o=0;e.length>o;o+=16){var a=n,c=i,h=s,l=r;n=md5_ff(n,i,s,r,e[o+0],7,-680876936),r=md5_ff(r,n,i,s,e[o+1],12,-389564586),s=md5_ff(s,r,n,i,e[o+2],17,606105819),i=md5_ff(i,s,r,n,e[o+3],22,-1044525330),n=md5_ff(n,i,s,r,e[o+4],7,-176418897),r=md5_ff(r,n,i,s,e[o+5],12,1200080426),s=md5_ff(s,r,n,i,e[o+6],17,-1473231341),i=md5_ff(i,s,r,n,e[o+7],22,-45705983),n=md5_ff(n,i,s,r,e[o+8],7,1770035416),r=md5_ff(r,n,i,s,e[o+9],12,-1958414417),s=md5_ff(s,r,n,i,e[o+10],17,-42063),i=md5_ff(i,s,r,n,e[o+11],22,-1990404162),n=md5_ff(n,i,s,r,e[o+12],7,1804603682),r=md5_ff(r,n,i,s,e[o+13],12,-40341101),s=md5_ff(s,r,n,i,e[o+14],17,-1502002290),i=md5_ff(i,s,r,n,e[o+15],22,1236535329),n=md5_gg(n,i,s,r,e[o+1],5,-165796510),r=md5_gg(r,n,i,s,e[o+6],9,-1069501632),s=md5_gg(s,r,n,i,e[o+11],14,643717713),i=md5_gg(i,s,r,n,e[o+0],20,-373897302),n=md5_gg(n,i,s,r,e[o+5],5,-701558691),r=md5_gg(r,n,i,s,e[o+10],9,38016083),s=md5_gg(s,r,n,i,e[o+15],14,-660478335),i=md5_gg(i,s,r,n,e[o+4],20,-405537848),n=md5_gg(n,i,s,r,e[o+9],5,568446438),r=md5_gg(r,n,i,s,e[o+14],9,-1019803690),s=md5_gg(s,r,n,i,e[o+3],14,-187363961),i=md5_gg(i,s,r,n,e[o+8],20,1163531501),n=md5_gg(n,i,s,r,e[o+13],5,-1444681467),r=md5_gg(r,n,i,s,e[o+2],9,-51403784),s=md5_gg(s,r,n,i,e[o+7],14,1735328473),i=md5_gg(i,s,r,n,e[o+12],20,-1926607734),n=md5_hh(n,i,s,r,e[o+5],4,-378558),r=md5_hh(r,n,i,s,e[o+8],11,-2022574463),s=md5_hh(s,r,n,i,e[o+11],16,1839030562),i=md5_hh(i,s,r,n,e[o+14],23,-35309556),n=md5_hh(n,i,s,r,e[o+1],4,-1530992060),r=md5_hh(r,n,i,s,e[o+4],11,1272893353),s=md5_hh(s,r,n,i,e[o+7],16,-155497632),i=md5_hh(i,s,r,n,e[o+10],23,-1094730640),n=md5_hh(n,i,s,r,e[o+13],4,681279174),r=md5_hh(r,n,i,s,e[o+0],11,-358537222),s=md5_hh(s,r,n,i,e[o+3],16,-722521979),i=md5_hh(i,s,r,n,e[o+6],23,76029189),n=md5_hh(n,i,s,r,e[o+9],4,-640364487),r=md5_hh(r,n,i,s,e[o+12],11,-421815835),s=md5_hh(s,r,n,i,e[o+15],16,530742520),i=md5_hh(i,s,r,n,e[o+2],23,-995338651),n=md5_ii(n,i,s,r,e[o+0],6,-198630844),r=md5_ii(r,n,i,s,e[o+7],10,1126891415),s=md5_ii(s,r,n,i,e[o+14],15,-1416354905),i=md5_ii(i,s,r,n,e[o+5],21,-57434055),n=md5_ii(n,i,s,r,e[o+12],6,1700485571),r=md5_ii(r,n,i,s,e[o+3],10,-1894986606),s=md5_ii(s,r,n,i,e[o+10],15,-1051523),i=md5_ii(i,s,r,n,e[o+1],21,-2054922799),n=md5_ii(n,i,s,r,e[o+8],6,1873313359),r=md5_ii(r,n,i,s,e[o+15],10,-30611744),s=md5_ii(s,r,n,i,e[o+6],15,-1560198380),i=md5_ii(i,s,r,n,e[o+13],21,1309151649),n=md5_ii(n,i,s,r,e[o+4],6,-145523070),r=md5_ii(r,n,i,s,e[o+11],10,-1120210379),s=md5_ii(s,r,n,i,e[o+2],15,718787259),i=md5_ii(i,s,r,n,e[o+9],21,-343485551),n=safe_add(n,a),i=safe_add(i,c),s=safe_add(s,h),r=safe_add(r,l)}return[n,i,s,r]}function md5_cmn(e,t,n,i,s,r){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(i,r)),s),n)}function md5_ff(e,t,n,i,s,r,o){return md5_cmn(t&n|~t&i,e,t,s,r,o)}function md5_gg(e,t,n,i,s,r,o){return md5_cmn(t&i|n&~i,e,t,s,r,o)}function md5_hh(e,t,n,i,s,r,o){return md5_cmn(t^n^i,e,t,s,r,o)}function md5_ii(e,t,n,i,s,r,o){return md5_cmn(n^(t|~i),e,t,s,r,o)}function core_hmac_md5(e,t){var n=str2binl(e);n.length>16&&(n=core_md5(n,e.length*chrsz));for(var i=Array(16),s=Array(16),r=0;16>r;r++)i[r]=909522486^n[r],s[r]=1549556828^n[r];var o=core_md5(i.concat(str2binl(t)),512+t.length*chrsz);return core_md5(s.concat(o),640)}function safe_add(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function bit_rol(e,t){return e<<t|e>>>32-t}function str2binl(e){for(var t=[],n=(1<<chrsz)-1,i=0;e.length*chrsz>i;i+=chrsz)t[i>>5]|=(e.charCodeAt(i/chrsz)&n)<<i%32;return t}function binl2str(e){for(var t="",n=(1<<chrsz)-1,i=0;32*e.length>i;i+=chrsz)t+=String.fromCharCode(e[i>>5]>>>i%32&n);return t}function binl2hex(e){for(var t=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;4*e.length>i;i++)n+=t.charAt(15&e[i>>2]>>8*(i%4)+4)+t.charAt(15&e[i>>2]>>8*(i%4));return n}function binl2b64(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",i=0;4*e.length>i;i+=3)for(var s=(255&e[i>>2]>>8*(i%4))<<16|(255&e[i+1>>2]>>8*((i+1)%4))<<8|255&e[i+2>>2]>>8*((i+2)%4),r=0;4>r;r++)n+=8*i+6*r>32*e.length?b64pad:t.charAt(63&s>>6*(3-r));return n}function utf8t2d(e){e=e.replace(/\r\n/g,"\n");var t=[],n=String.fromCharCode(237);if(0>n.charCodeAt(0))for(var i=0;e.length>i;i++){var s=e.charCodeAt(i);s>0?t[t.length]=s:(t[t.length]=192|256+s>>6,t[t.length]=128|63&256+s)}else for(var i=0;e.length>i;i++){var s=e.charCodeAt(i);128>s?t[t.length]=s:s>127&&2048>s?(t[t.length]=192|s>>6,t[t.length]=128|63&s):(t[t.length]=224|s>>12,t[t.length]=128|63&s>>6,t[t.length]=128|63&s)}return t}function utf8d2t(e){for(var t=[],n=0;e.length>n;)128>e[n]?(t[t.length]=String.fromCharCode(e[n]),n++):e[n]>191&&224>e[n]?(t[t.length]=String.fromCharCode((31&e[n])<<6|63&e[n+1]),n+=2):(t[t.length]=String.fromCharCode((15&e[n])<<12|(63&e[n+1])<<6|63&e[n+2]),n+=3);return t.join("")}function b64arrays(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";b64=[],f64=[];for(var t=0;e.length>t;t++)b64[t]=e.charAt(t),f64[e.charAt(t)]=t}function b64d2t(e){var t=[],n=0,i=e.length;for(1==i%3&&(e[e.length]=0,e[e.length]=0),2==i%3&&(e[e.length]=0);e.length>n;)t[t.length]=b64[e[n]>>2],t[t.length]=b64[(3&e[n])<<4|e[n+1]>>4],t[t.length]=b64[(15&e[n+1])<<2|e[n+2]>>6],t[t.length]=b64[63&e[n+2]],n+=3;1==i%3&&(t[t.length-1]=t[t.length-2]="="),2==i%3&&(t[t.length-1]="=");var s=t.join("");return s}function b64t2d(e){var t=[],n=0;for(e=e.replace(/\n|\r/g,""),e=e.replace(/=/g,"");e.length>n;)t[t.length]=f64[e.charAt(n)]<<2|f64[e.charAt(n+1)]>>4,t[t.length]=(15&f64[e.charAt(n+1)])<<4|f64[e.charAt(n+2)]>>2,t[t.length]=(3&f64[e.charAt(n+2)])<<6|f64[e.charAt(n+3)],n+=4;return 2==e.length%4&&(t=t.slice(0,t.length-2)),3==e.length%4&&(t=t.slice(0,t.length-1)),t}function cnonce(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;e>i;i++)n+=t.charAt(Math.round(Math.random((new Date).getTime())*(t.length-1)));return n}function JSJaCJSON(){}function XmlHttp(){}function XmlDocument(){}function STANZA_ERROR(e,t,n){return window==this?new STANZA_ERROR(e,t,n):(this.code=e,this.type=t,this.cond=n,void 0)}function JSJaCConsoleLogger(e){this.level=e||4,this.start=function(){},this.log=function(e,t){if(t=t||0,!(t>this.level)&&"undefined"!=typeof console)try{switch(t){case 0:console.warn(e);break;case 1:console.error(e);break;case 2:console.info(e);break;case 4:console.debug(e);break;default:console.log(e)}}catch(n){try{console.log(e)}catch(n){}}},this.setLevel=function(e){return this.level=e,this},this.getLevel=function(){return this.level}}function JSJaCCookie(e,t,n,i,s){return window==this?new JSJaCCookie(e,t,n,i,s):(this.name=e,this.value=t,this.secs=n,this.domain=i,this.path=s,this.write=function(){if(this.secs){var e=new Date;e.setTime(e.getTime()+1e3*this.secs);var t="; expires="+e.toGMTString()}else var t="";var n=this.domain?"; domain="+this.domain:"",i=this.path?"; path="+this.path:"; path=/";document.cookie=this.getName()+"="+JSJaCCookie._escape(this.getValue())+t+n+i},this.erase=function(){var e=new JSJaCCookie(this.getName(),"",-1);e.write()},this.getName=function(){return this.name},this.setName=function(e){return this.name=e,this},this.getValue=function(){return this.value},this.setValue=function(e){return this.value=e,this},this.setDomain=function(e){return this.domain=e,this},this.setPath=function(e){return this.path=e,this},void 0)}function JSJaCCookieException(e){this.message=e,this.name="CookieException"}function JSJaCError(e,t,n){var i=XmlDocument.create("error","jsjac");return i.documentElement.setAttribute("code",e),i.documentElement.setAttribute("type",t),n&&i.documentElement.appendChild(i.createElement(n)).setAttribute("xmlns","urn:ietf:params:xml:ns:xmpp-stanzas"),i.documentElement}function JSJaCJID(e){this._node="",this._domain="",this._resource="","string"==typeof e?(-1!=e.indexOf("@")&&(this.setNode(e.substring(0,e.indexOf("@"))),e=e.substring(e.indexOf("@")+1)),-1!=e.indexOf("/")&&(this.setResource(e.substring(e.indexOf("/")+1)),e=e.substring(0,e.indexOf("/"))),this.setDomain(e)):(this.setNode(e.node),this.setDomain(e.domain),this.setResource(e.resource))}function JSJaCJIDInvalidException(e){this.message=e,this.name="JSJaCJIDInvalidException"}function JSJaCKeys(e,t){var n=Math.random();if(this._k=[],this._k[0]=""+n,t?this.oDbg=t:(this.oDbg={},this.oDbg.log=function(){}),e)for(var i=1;JSJAC_NKEYS>i;i++)this._k[i]=e(this._k[i-1]),t.log(i+": "+this._k[i],4);this._indexAt=JSJAC_NKEYS-1,this.getKey=function(){return this._k[this._indexAt--]},this.lastKey=function(){return 0==this._indexAt},this.size=function(){return this._k.length},this._getSuspendVars=function(){return"_k,_indexAt".split(",")}}function JSJaCPacket(e){this.name=e,this.doc=JSJACPACKET_USE_XMLNS!==void 0&&JSJACPACKET_USE_XMLNS?XmlDocument.create(e,"jabber:client"):XmlDocument.create(e,"")}function JSJaCPresence(){this.base=JSJaCPacket,this.base("presence")}function JSJaCIQ(){this.base=JSJaCPacket,this.base("iq")}function JSJaCMessage(){this.base=JSJaCPacket,this.base("message")}function JSJaCConnection(e){e&&e.oDbg&&e.oDbg.log?this.oDbg=e.oDbg:(this.oDbg={},this.oDbg.log=function(){}),e&&e.timerval?this.setPollInterval(e.timerval):this.setPollInterval(JSJAC_TIMERVAL),e&&e.httpbase&&(this._httpbase=e.httpbase),this.allow_plain=e&&e.allow_plain?e.allow_plain:JSJAC_ALLOW_PLAIN,this._cookie_prefix=e&&e.cookie_prefix?e.cookie_prefix:"",this._connected=!1,this._events=[],this._keys=null,this._ID=0,this._inQ=[],this._pQueue=[],this._regIDs=[],this._req=[],this._status="intialized",this._errcnt=0,this._inactivity=JSJAC_INACTIVITY,this._sendRawCallbacks=[]}function JSJaCHttpBindingConnection(e){this.base=JSJaCConnection,this.base(e),this._hold=JSJACHBC_MAX_HOLD,this._inactivity=0,this._last_requests={},this._last_rid=0,this._min_polling=0,this._pause=0,this._wait=JSJACHBC_MAX_WAIT}function JSJaCHttpPollingConnection(e){this.base=JSJaCConnection,this.base(e),JSJACPACKET_USE_XMLNS=!1}function Cache(e){this.items={},this.count=0,null==e&&(e=-1),this.maxSize=e,this.fillFactor=.75,this.purgeSize=Math.round(this.maxSize*this.fillFactor),this.stats={},this.stats.hits=0,this.stats.misses=0}eval(function(e,t,n,i,s,r){if(s=function(e){return(t>e?"":s(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;n--;)r[s(n)]=i[n]||s(n);i=[function(e){return r[e]}],s=function(){return"\\w+"},n=1}for(;n--;)i[n]&&(e=e.replace(RegExp("\\b"+s(n)+"\\b","g"),i[n]));return e}('(4(D){6 C=D.1f.Q;D.1f.Q=4(){D("*",2).15(2).1F("Q");5 C.O(2,1O)};4 B(E){4 G(H){6 I=H.3N;5(I.1A!="19"&&I.3M!="18")}6 F=G(E);(F&&D.1d(D.3L(E,"3K"),4(){5(F=G(2))}));5 F}D.1e(D.3J[":"],{w:4(F,G,E){5 D.w(F,E[3])},3I:4(F,G,E){6 H=F.3H.3G();5(F.3F>=0&&(("a"==H&&F.3E)||(/3D|3C|3B|1r/.k(H)&&"18"!=F.1G&&!F.l))&&B(F))}});D.3A={3z:8,3y:20,3x:3w,3v:17,3u:3t,3s:3r,3q:35,3p:13,3o:27,3n:36,3m:3l,3k:37,3j:3i,3h:3g,3f:3e,3d:3c,3b:3a,31:30,2Z:34,2Y:33,2X:2W,2V:39,2U:16,2T:32,2S:9,2R:38};4 A(H,I,J,G){4 F(L){6 K=D[H][I][L]||[];5(o K=="n"?K.1g(/,?\\s+/):K)}6 E=F("2Q");7(G.12==1&&o G[0]=="n"){E=E.2P(F("1M"))}5(D.2O(J,E)!=-1)}D.u=4(F,E){6 G=F.1g(".")[0];F=F.1g(".")[1];D.1f[F]=4(K){6 I=(o K=="n"),J=2N.t.2M.1E(1O,1);7(I&&K.2L(0,1)=="2K"){5 2}7(I&&A(G,F,K,J)){6 H=D.w(2[0],F);5(H?H[K].O(H,J):1I)}5 2.1d(4(){6 L=D.w(2,F);(!L&&!I&&D.w(2,F,2J D[G][F](2,K)));(L&&I&&D.2I(L[K])&&L[K].O(L,J))})};D[G][F]=4(J,I){6 H=2;2.h=F;2.1b=D[G][F].2H||F;2.1H=G+"-"+F;2.e=D.1e({},D.u.x,D[G][F].x,D.1N&&D.1N.1a(J)[F],I);2.d=D(J).i("2G."+F,4(M,K,L){5 H.v(K,L)}).i("2F."+F,4(L,K){5 H.1c(K)}).i("Q",4(){5 H.1K()});2.1L()};D[G][F].t=D.1e({},D.u.t,E);D[G][F].1M="1J"};D.u.t={1L:4(){},1K:4(){2.d.2E(2.h)},1J:4(G,H){6 F=G,E=2;7(o G=="n"){7(H===1I){5 2.1c(G)}F={};F[G]=H}D.1d(F,4(I,J){E.v(I,J)})},1c:4(E){5 2.e[E]},v:4(E,F){2.e[E]=F;7(E=="l"){2.d[F?"1C":"2D"](2.1H+"-l")}},2C:4(){2.v("l",b)},2B:4(){2.v("l",j)},2A:4(F,H,G){6 E=(F==2.1b?F:2.1b+F);H=H||D.2z.2y({1G:E,14:2.d[0]});5 2.d.1F(E,[H,G],2.e[F])}};D.u.x={l:b};D.c={2x:{15:4(F,G,I){6 H=D.c[F].t;1D(6 E 2w I){H.P[E]=H.P[E]||[];H.P[E].2v([G,I[E]])}},1E:4(E,G,F){6 I=E.P[G];7(!I){5}1D(6 H=0;H<I.12;H++){7(E.e[I[H][0]]){I[H][1].O(E.d,F)}}}},r:{},f:4(E){7(D.c.r[E]){5 D.c.r[E]}6 F=D(\'<2u 2t="c-2s">\').1C(E).f({2r:"2q",2p:"-1B",1w:"-1B",1A:"2o"}).2n("1z");D.c.r[E]=!!((!(/2m|2l/).k(F.f("2k"))||(/^[1-9]/).k(F.f("2j"))||(/^[1-9]/).k(F.f("2i"))||!(/19/).k(F.f("2h"))||!(/2g|2f\\(0, 0, 0, 0\\)/).k(F.f("2e"))));2d{D("1z").1a(0).2c(F.1a(0))}2b(G){}5 D.c.r[E]},2a:4(E){5 D(E).q("p","1v").f("1y","19").i("1x.c",4(){5 b})},29:4(E){5 D(E).q("p","28").f("1y","").N("1x.c")},26:4(H,F){7(D(H).f("25")=="18"){5 b}6 E=(F&&F=="1w")?"24":"23",G=b;7(H[E]>0){5 j}H[E]=1;G=(H[E]>0);H[E]=0;5 G}};D.c.1i={22:4(){6 E=2;2.d.i("21."+2.h,4(F){5 E.1t(F)});7(D.11.10){2.1u=2.d.q("p");2.d.q("p","1v")}2.1Z=b},1Y:4(){2.d.N("."+2.h);(D.11.10&&2.d.q("p",2.1u))},1t:4(G){(2.g&&2.m(G));2.z=G;6 F=2,H=(G.1X==1),E=(o 2.e.S=="n"?D(G.14).1W().15(G.14).1V(2.e.S).12:b);7(!H||E||!2.1j(G)){5 j}2.y=!2.e.R;7(!2.y){2.1U=1T(4(){F.y=j},2.e.R)}7(2.X(G)&&2.V(G)){2.g=(2.U(G)!==b);7(!2.g){G.1S();5 j}}2.Z=4(I){5 F.1s(I)};2.Y=4(I){5 F.m(I)};D(1q).i("1p."+2.h,2.Z).i("1o."+2.h,2.Y);5 b},1s:4(E){7(D.11.10&&!E.1r){5 2.m(E)}7(2.g){2.T(E);5 b}7(2.X(E)&&2.V(E)){2.g=(2.U(2.z,E)!==b);(2.g?2.T(E):2.m(E))}5!2.g},m:4(E){D(1q).N("1p."+2.h,2.Z).N("1o."+2.h,2.Y);7(2.g){2.g=b;2.1k(E)}5 b},X:4(E){5(W.1R(W.1m(2.z.1n-E.1n),W.1m(2.z.1l-E.1l))>=2.e.1h)},V:4(E){5 2.y},U:4(E){},T:4(E){},1k:4(E){},1j:4(E){5 j}};D.c.1i.x={S:1Q,1h:1,R:0}})(1P)',62,236,"||this||function|return|var|if||||false|ui|element|options|css|_mouseStarted|widgetName|bind|true|test|disabled|_mouseUp|string|typeof|unselectable|attr|cssCache||prototype|widget|_setData|data|defaults|mouseDelayMet|_mouseDownEvent||||||||||||||unbind|apply|plugins|remove|delay|cancel|_mouseDrag|_mouseStart|_mouseDelayMet|Math|_mouseDistanceMet|_mouseUpDelegate|_mouseMoveDelegate|msie|browser|length||target|add|||hidden|none|get|widgetEventPrefix|_getData|each|extend|fn|split|distance|mouse|_mouseCapture|_mouseStop|pageY|abs|pageX|mouseup|mousemove|document|button|_mouseMove|_mouseDown|_mouseUnselectable|on|left|selectstart|MozUserSelect|body|display|5000px|addClass|for|call|triggerHandler|type|widgetBaseClass|undefined|option|destroy|_init|getterSetter|metadata|arguments|jQuery|null|max|preventDefault|setTimeout|_mouseDelayTimer|filter|parents|which|_mouseDestroy|started||mousedown|_mouseInit|scrollTop|scrollLeft|overflow|hasScroll||off|enableSelection|disableSelection|catch|removeChild|try|backgroundColor|rgba|transparent|backgroundImage|width|height|cursor|default|auto|appendTo|block|top|absolute|position|gen|class|div|push|in|plugin|fix|event|_trigger|disable|enable|removeClass|removeData|getData|setData|eventPrefix|isFunction|new|_|substring|slice|Array|inArray|concat|getter|UP|TAB|SPACE|SHIFT|RIGHT|190|PERIOD|PAGE_UP|PAGE_DOWN|109|NUMPAD_SUBTRACT|||||||||106|NUMPAD_MULTIPLY|108|NUMPAD_ENTER|111|NUMPAD_DIVIDE|110|NUMPAD_DECIMAL|107|NUMPAD_ADD|LEFT|45|INSERT|HOME|ESCAPE|ENTER|END|40|DOWN|46|DELETE|CONTROL|188|COMMA|CAPS_LOCK|BACKSPACE|keyCode|textarea|select|input|href|tabIndex|toLowerCase|nodeName|tabbable|expr|parentNode|dir|visibility|style".split("|"),0,{})),eval(function(e,t,n,i,s,r){if(s=function(e){return(t>e?"":s(parseInt(e/t)))+((e%=t)>35?String.fromCharCode(e+29):e.toString(36))},!"".replace(/^/,String)){for(;n--;)r[s(n)]=i[n]||s(n);i=[function(e){return r[e]}],s=function(){return"\\w+"},n=1}for(;n--;)i[n]&&(e=e.replace(RegExp("\\b"+s(n)+"\\b","g"),i[n]));return e}('(a(B){a A(E,D){6 C=B.3e.4t&&B.3e.4s<4r;5(E.3d&&!C){e E.3d(D)}5(E.3c){e!!(E.3c(D)&16)}1Y(D=D.1d){5(D==E){e 11}}e Q}B.4q("i.l",B.2u({},B.i.4p,{4o:a(){6 C=4.7;4.W={};4.k.2i("i-l");4.36();4.1b=4.d.t?(/9|2f/).1o(4.d[0].q.f("4n")):Q;4.b=4.k.b();4.4m()},4l:{},i:a(C){e{j:(C||4)["j"],r:(C||4)["r"]||B([]),X:(C||4)["X"],4k:(C||4)["1f"],7:4.7,k:4.k,q:(C||4)["c"],4j:C?C.k:R}},v:a(F,E,C,D){B.i.1i.13(4,F,[E,4.i(C)]);5(!D){4.k.2G(F=="1h"?F:"1h"+F,[E,4.i(C)],4.7[F])}},2t:a(E){6 C=4.2m(E&&E.39);6 D=[];E=E||{};B(C).1u(a(){6 F=(B(4.q||4).2n(E.4i||"38")||"").4h(E.3a||(/(.+)[-=4g](.+)/));5(F){D.1g((E.3b||F[1]+"[]")+"="+(E.3b&&E.3a?F[1]:F[2]))}});e D.4f("&")},2s:a(E){6 C=4.2m(E&&E.39);6 D=[];C.1u(a(){D.1g(B(4).2n(E.2n||"38"))});e D},30:a(L){6 E=4.1f.9,D=E+4.s.o,K=4.1f.8,J=K+4.s.p;6 F=L.9,C=F+L.o,M=L.8,I=M+L.p;6 N=4.b.14.8,H=4.b.14.9;6 G=(K+N)>M&&(K+N)<I&&(E+H)>F&&(E+H)<C;5(4.7.1A=="37"||4.7.4e||(4.7.1A=="24"&&4.s[4.1b?"o":"p"]>L[4.1b?"o":"p"])){e G}U{e(F<E+(4.s.o/2)&&D-(4.s.o/2)<C&&M<K+(4.s.p/2)&&J-(4.s.p/2)<I)}},2J:a(N){6 E=4.1f.9,D=E+4.s.o,L=4.1f.8,J=L+4.s.p;6 F=N.9,C=F+N.o,O=N.8,I=O+N.p;6 P=4.b.14.8,H=4.b.14.9;6 G=(L+P)>O&&(L+P)<I&&(E+H)>F&&(E+H)<C;5(4.7.1A=="37"||(4.7.1A=="24"&&4.s[4.1b?"o":"p"]>N[4.1b?"o":"p"])){5(!G){e Q}5(4.1b){5((E+H)>F&&(E+H)<F+N.o/2){e 2}5((E+H)>F+N.o/2&&(E+H)<C){e 1}}U{6 M=N.p;6 K=L-4.2a.8<0?2:1;5(K==1&&(L+P)<O+M/2){e 2}U{5(K==2&&(L+P)>O+M/2){e 1}}}}U{5(!(F<E+(4.s.o/2)&&D-(4.s.o/2)<C&&O<L+(4.s.p/2)&&J-(4.s.p/2)<I)){e Q}5(4.1b){5(D>F&&E<F){e 2}5(E<C&&D>C){e 1}}U{5(J>O&&L<O){e 1}5(L<I&&J>I){e 2}}}e Q},36:a(){4.2k();4.1M()},2m:a(H){6 D=4;6 C=[];6 F=[];5(4.7.1v&&H){w(6 G=4.7.1v.t-1;G>=0;G--){6 J=B(4.7.1v[G]);w(6 E=J.t-1;E>=0;E--){6 I=B.15(J[E],"l");5(I&&I!=4&&!I.7.1T){F.1g([B.1U(I.7.d)?I.7.d.13(I.k):B(I.7.d,I.k).27(".i-l-j"),I])}}}}F.1g([B.1U(4.7.d)?4.7.d.13(4.k,R,{7:4.7,q:4.c}):B(4.7.d,4.k).27(".i-l-j"),4]);w(6 G=F.t-1;G>=0;G--){F[G][0].1u(a(){C.1g(4)})}e B(C)},2W:a(){6 E=4.c.2X(":15(l-q)");w(6 D=0;D<4.d.t;D++){w(6 C=0;C<E.t;C++){5(E[C]==4.d[D].q[0]){4.d.4d(D,1)}}}},2k:a(){4.d=[];4.g=[4];6 D=4.d;6 C=4;6 F=[[B.1U(4.7.d)?4.7.d.13(4.k,R,{7:4.7,q:4.c}):B(4.7.d,4.k),4]];5(4.7.1v){w(6 G=4.7.1v.t-1;G>=0;G--){6 I=B(4.7.1v[G]);w(6 E=I.t-1;E>=0;E--){6 H=B.15(I[E],"l");5(H&&H!=4&&!H.7.1T){F.1g([B.1U(H.7.d)?H.7.d.13(H.k):B(H.7.d,H.k),H]);4.g.1g(H)}}}}w(6 G=F.t-1;G>=0;G--){F[G][0].1u(a(){B.15(4,"l-q",F[G][1]);D.1g({q:B(4),35:F[G][1],o:0,p:0,9:0,8:0})})}},1M:a(D){5(4.u){6 C=4.u.b();4.b.n={8:C.8+4.1F.8,9:C.9+4.1F.9}}w(6 F=4.d.t-1;F>=0;F--){5(4.d[F].35!=4.1t&&4.1t&&4.d[F].q[0]!=4.c[0]){1P}6 E=4.7.34?B(4.7.34,4.d[F].q):4.d[F].q;5(!D){4.d[F].o=E[0].1G;4.d[F].p=E[0].1J}6 G=E.b();4.d[F].9=G.9;4.d[F].8=G.8}5(4.7.2l&&4.7.2l.33){4.7.2l.33.13(4)}U{w(6 F=4.g.t-1;F>=0;F--){6 G=4.g[F].k.b();4.g[F].W.9=G.9;4.g[F].W.8=G.8;4.g[F].W.o=4.g[F].k.2h();4.g[F].W.p=4.g[F].k.2g()}}},4c:a(){4.k.2y("i-l i-l-1T").32("l").4b(".l");4.4a();w(6 C=4.d.t-1;C>=0;C--){4.d[C].q.32("l-q")}},2T:a(E){6 C=E||4,F=C.7;5(!F.r||F.r.49==48){6 D=F.r;F.r={k:a(){6 G=B(h.47(C.c[0].46)).2i(D||"i-l-r")[0];5(!D){G.2b.45="2R";h.V.1N(G);G.31=C.c[0].31;h.V.44(G)}e G},1C:a(G,H){5(D&&!F.2p){e}5(!H.p()){H.p(C.c.43()-z(C.c.f("42")||0,10)-z(C.c.f("41")||0,10))}5(!H.o()){H.o(C.c.40()-z(C.c.f("3Z")||0,10)-z(C.c.f("3Y")||0,10))}}}}C.r=B(F.r.k.13(C.k,C.c));C.c.n()[0].1N(C.r[0]);C.r[0].1d.2F(C.r[0],C.c[0]);F.r.1C(C,C.r)},2H:a(F){w(6 D=4.g.t-1;D>=0;D--){5(4.30(4.g[D].W)){5(!4.g[D].W.1l){5(4.1t!=4.g[D]){6 I=3X;6 H=R;6 E=4.1f[4.g[D].1b?"9":"8"];w(6 C=4.d.t-1;C>=0;C--){5(!A(4.g[D].k[0],4.d[C].q[0])){1P}6 G=4.d[C][4.g[D].1b?"9":"8"];5(1s.2Z(G-E)<I){I=1s.2Z(G-E);H=4.d[C]}}5(!H&&!4.7.2r){1P}4.1t=4.g[D];H?4.7.1L.13(4,F,H,R,11):4.7.1L.13(4,F,R,4.g[D].k,11);4.v("29",F);4.g[D].v("29",F,4);4.7.r.1C(4.1t,4.r)}4.g[D].v("1l",F,4);4.g[D].W.1l=1}}U{5(4.g[D].W.1l){4.g[D].v("2x",F,4);4.g[D].W.1l=0}}}},3W:a(G,F){5(4.7.1T||4.7.2I=="3V"){e Q}4.2k();6 E=R,D=4,C=B(G.1S).2V().1u(a(){5(B.15(4,"l-q")==D){E=B(4);e Q}});5(B.15(G.1S,"l-q")==D){E=B(G.1S)}5(!E){e Q}5(4.7.2Y&&!F){6 H=Q;B(4.7.2Y,E).2X("*").3U().1u(a(){5(4==G.1S){H=11}});5(!H){e Q}}4.c=E;4.2W();e 11},2U:a(D){6 E=4.7;6 C=3T E.j=="a"?B(E.j.3S(4.k[0],[D,4.c])):(E.j=="1B"?4.c:4.c.3R());5(!C.2V("V").t){B(E.23!="n"?E.23:4.c[0].1d)[0].1N(C[0])}e C},3Q:a(G,I,K){6 C=4.7;4.1t=4;4.1M();4.j=4.2U(G);4.12={9:(z(4.c.f("3P"),10)||0),8:(z(4.c.f("3O"),10)||0)};4.b=4.c.b();4.b={8:4.b.8-4.12.8,9:4.b.9-4.12.9};4.b.14={9:G.1m-4.b.9,8:G.1n-4.b.8};4.u=4.j.u();6 E=4.u.b();4.1F={8:(z(4.u.f("2d"),10)||0),9:(z(4.u.f("2e"),10)||0)};4.b.n={8:E.8+4.1F.8,9:E.9+4.1F.9};4.2a=4.1c=4.1O(G);4.26={1D:4.c.1D()[0],n:4.c.n()[0]};4.s={o:4.j.2h(),p:4.j.2g()};5(C.j=="1B"){4.2z={X:4.c.f("X"),8:4.c.f("8"),9:4.c.f("9"),2j:4.c.f("2j")}}U{4.c.3N()}4.j.f({X:"1Q",2j:"3M"}).2i("i-l-j");4.2T();4.v("1y",G);5(!4.3L){4.s={o:4.j.2h(),p:4.j.2g()}}5(C.1a){5(C.1a.9!=1R){4.b.14.9=C.1a.9}5(C.1a.2f!=1R){4.b.14.9=4.s.o-C.1a.2f}5(C.1a.8!=1R){4.b.14.8=C.1a.8}5(C.1a.2S!=1R){4.b.14.8=4.s.p-C.1a.2S}}5(C.m){5(C.m=="n"){C.m=4.j[0].1d}5(C.m=="h"||C.m=="1j"){4.m=[0-4.b.n.9,0-4.b.n.8,B(C.m=="h"?h:1j).o()-4.b.n.9-4.s.o-4.12.9-(z(4.k.f("2Q"),10)||0),(B(C.m=="h"?h:1j).p()||h.V.1d.2O)-4.b.n.8-4.s.p-4.12.8-(z(4.k.f("2N"),10)||0)]}5(!(/^(h|1j|n)$/).1o(C.m)){6 D=B(C.m)[0];6 J=B(C.m).b();6 H=(B(D).f("1x")!="2R");4.m=[J.9+(z(B(D).f("2e"),10)||0)-4.b.n.9,J.8+(z(B(D).f("2d"),10)||0)-4.b.n.8,J.9+(H?1s.2P(D.3K,D.1G):D.1G)-(z(B(D).f("2e"),10)||0)-4.b.n.9-4.s.o-4.12.9-(z(4.c.f("2Q"),10)||0),J.8+(H?1s.2P(D.2O,D.1J):D.1J)-(z(B(D).f("2d"),10)||0)-4.b.n.8-4.s.p-4.12.8-(z(4.c.f("2N"),10)||0)]}}5(!K){w(6 F=4.g.t-1;F>=0;F--){4.g[F].v("3J",G,4)}}5(B.i.1e){B.i.1e.3I=4}5(B.i.1e&&!C.2C){B.i.1e.3H(4,G)}4.2w=11;4.2L(G);e 11},2c:a(D,E){5(!E){E=4.X}6 C=D=="1Q"?1:-1;e{8:(E.8+4.b.n.8*C-(4.u[0]==h.V?0:4.u[0].T)*C+4.12.8*C),9:(E.9+4.b.n.9*C-(4.u[0]==h.V?0:4.u[0].S)*C+4.12.9*C)}},1O:a(F){6 G=4.7;6 C={8:(F.1n-4.b.14.8-4.b.n.8+(4.u[0]==h.V?0:4.u[0].T)),9:(F.1m-4.b.14.9-4.b.n.9+(4.u[0]==h.V?0:4.u[0].S))};5(!4.1c){e C}5(4.m){5(C.9<4.m[0]){C.9=4.m[0]}5(C.8<4.m[1]){C.8=4.m[1]}5(C.9>4.m[2]){C.9=4.m[2]}5(C.8>4.m[3]){C.8=4.m[3]}}5(G.19){6 E=4.1c.8+1s.2M((C.8-4.1c.8)/G.19[1])*G.19[1];C.8=4.m?(!(E<4.m[1]||E>4.m[3])?E:(!(E<4.m[1])?E-G.19[1]:E+G.19[1])):E;6 D=4.1c.9+1s.2M((C.9-4.1c.9)/G.19[0])*G.19[0];C.9=4.m?(!(D<4.m[0]||D>4.m[2])?D:(!(D<4.m[0])?D-G.19[0]:D+G.19[0])):D}e C},2L:a(D){4.X=4.1O(D);4.1f=4.2c("1Q");B.i.1i.13(4,"1h",[D,4.i()]);4.1f=4.2c("1Q");4.j[0].2b.9=4.X.9+"2K";4.j[0].2b.8=4.X.8+"2K";w(6 C=4.d.t-1;C>=0;C--){6 E=4.2J(4.d[C]);5(!E){1P}5(4.d[C].q[0]!=4.c[0]&&4.r[E==1?"3G":"1D"]()[0]!=4.d[C].q[0]&&!A(4.r[0],4.d[C].q[0])&&(4.7.2I=="3F-3E"?!A(4.k[0],4.d[C].q[0]):11)){4.2a=4.1O(D);4.2E=E==1?"2D":"3D";4.7.1L.13(4,D,4.d[C]);4.v("29",D);3C}}4.2H(D);5(B.i.1e){B.i.1e.3B(4,D)}4.k.2G("1h",[D,4.i()],4.7["1h"]);e Q},2q:a(H,G,D,F){D?D[0].1N(4.r[0]):G.q[0].1d.2F(4.r[0],(4.2E=="2D"?G.q[0]:G.q[0].3A));4.1E=4.1E?++4.1E:1;6 E=4,C=4.1E;1j.3z(a(){5(C==E.1E){E.1M(!F)}},0)},3y:a(E,D){5(B.i.1e&&!4.7.2C){B.i.1e.3x(4,E)}5(4.7.2B){6 C=4;6 F=C.r.b();B(4.j).3w({9:F.9-4.b.n.9-C.12.9+(4.u[0]==h.V?0:4.u[0].S),8:F.8-4.b.n.8-C.12.8+(4.u[0]==h.V?0:4.u[0].T)},z(4.7.2B,10)||3v,a(){C.28(E)})}U{4.28(E,D)}e Q},28:a(E,D){5(!4.2A){4.r.3u(4.c)}4.2A=R;5(4.7.j=="1B"){4.c.f(4.2z).2y("i-l-j")}U{4.c.3t()}5(4.26.1D!=4.c.1D().27(".i-l-j")[0]||4.26.n!=4.c.n()[0]){4.v("1C",E,R,D)}5(!A(4.k[0],4.c[0])){4.v("25",E,R,D);w(6 C=4.g.t-1;C>=0;C--){5(A(4.g[C].k[0],4.c[0])){4.g[C].v("1C",E,4,D);4.g[C].v("3s",E,4,D)}}}w(6 C=4.g.t-1;C>=0;C--){4.g[C].v("3r",E,4,D);5(4.g[C].W.1l){4.g[C].v("2x",E,4);4.g[C].W.1l=0}}4.2w=Q;5(4.3q){4.v("1z",E,R,D);4.v("2v",E,R,D);e Q}4.v("1z",E,R,D);4.r.25();5(4.7.j!="1B"){4.j.25()}4.j=R;4.v("2v",E,R,D);e 11}}));B.2u(B.i.l,{3p:"2t 2s",3o:{j:"1B",1A:"24",3n:1,3m:0,1p:11,18:20,17:20,3l:":3k",d:"> *",1k:3j,2r:11,23:"n",1L:B.i.l.3i.2q,3h:"3g",2p:Q}});B.i.1i.1w("l","1r",{1y:a(E,D){6 C=B("V");5(C.f("1r")){D.7.22=C.f("1r")}C.f("1r",D.7.1r)},1z:a(D,C){5(C.7.22){B("V").f("1r",C.7.22)}}});B.i.1i.1w("l","1k",{1y:a(E,D){6 C=D.j;5(C.f("1k")){D.7.21=C.f("1k")}C.f("1k",D.7.1k)},1z:a(D,C){5(C.7.21){B(C.j).f("1k",C.7.21)}}});B.i.1i.1w("l","1q",{1y:a(E,D){6 C=D.j;5(C.f("1q")){D.7.1Z=C.f("1q")}C.f("1q",D.7.1q)},1z:a(D,C){5(C.7.1Z){B(C.j).f("1q",C.7.1Z)}}});B.i.1i.1w("l","1p",{1y:a(E,D){6 F=D.7;6 C=B(4).15("l");C.Z=a(G){2o{5(/1K|1p/.1o(G.f("1x"))||(/1K|1p/).1o(G.f("1x-y"))){e G}G=G.n()}1Y(G[0].1d);e B(h)}(C.c);C.Y=a(G){2o{5(/1K|1p/.1o(G.f("1x"))||(/1K|1p/).1o(G.f("1x-x"))){e G}G=G.n()}1Y(G[0].1d);e B(h)}(C.c);5(C.Z[0]!=h&&C.Z[0].1I!="1H"){C.1X=C.Z.b()}5(C.Y[0]!=h&&C.Y[0].1I!="1H"){C.1W=C.Y.b()}},1h:a(E,D){6 F=D.7;6 C=B(4).15("l");5(C.Z[0]!=h&&C.Z[0].1I!="1H"){5((C.1X.8+C.Z[0].1J)-E.1n<F.18){C.Z[0].T=C.Z[0].T+F.17}5(E.1n-C.1X.8<F.18){C.Z[0].T=C.Z[0].T-F.17}}U{5(E.1n-B(h).T()<F.18){B(h).T(B(h).T()-F.17)}5(B(1j).p()-(E.1n-B(h).T())<F.18){B(h).T(B(h).T()+F.17)}}5(C.Y[0]!=h&&C.Y[0].1I!="1H"){5((C.1W.9+C.Y[0].1G)-E.1m<F.18){C.Y[0].S=C.Y[0].S+F.17}5(E.1m-C.1W.9<F.18){C.Y[0].S=C.Y[0].S-F.17}}U{5(E.1m-B(h).S()<F.18){B(h).S(B(h).S()-F.17)}5(B(1j).o()-(E.1m-B(h).S())<F.18){B(h).S(B(h).S()+F.17)}}}});B.i.1i.1w("l","1V",{1h:a(E,D){6 C=B(4).15("l");5(D.7.1V=="y"){C.X.9=C.1c.9}5(D.7.1V=="x"){C.X.8=C.1c.8}}})})(3f)',62,278,"||||this|if|var|options|top|left|function|offset|currentItem|items|return|css|containers|document|ui|helper|element|sortable|containment|parent|width|height|item|placeholder|helperProportions|length|offsetParent|_propagate|for|||parseInt|||||||||||||||||false|null|scrollLeft|scrollTop|else|body|containerCache|position|overflowX|overflowY||true|margins|call|click|data||scrollSpeed|scrollSensitivity|grid|cursorAt|floating|originalPosition|parentNode|ddmanager|positionAbs|push|sort|plugin|window|zIndex|over|pageX|pageY|test|scroll|opacity|cursor|Math|currentContainer|each|connectWith|add|overflow|start|beforeStop|tolerance|original|update|prev|counter|offsetParentBorders|offsetWidth|HTML|tagName|offsetHeight|auto|sortIndicator|refreshPositions|appendChild|_generatePosition|continue|absolute|undefined|target|disabled|isFunction|axis|overflowXOffset|overflowYOffset|while|_opacity||_zIndex|_cursor|appendTo|guess|remove|domPosition|not|_clear|change|updateOriginalPosition|style|_convertPositionTo|borderTopWidth|borderLeftWidth|right|outerHeight|outerWidth|addClass|clear|_refreshItems|custom|_getItemsAsjQuery|attr|do|forcePlaceholderSize|_rearrange|dropOnEmpty|toArray|serialize|extend|stop|dragging|out|removeClass|_storedCSS|_noFinalSort|revert|dropBehaviour|down|direction|insertBefore|triggerHandler|_contactContainers|type|_intersectsWithEdge|px|_mouseDrag|round|marginBottom|scrollHeight|max|marginRight|hidden|bottom|_createPlaceholder|createHelper|parents|_removeCurrentsFromItems|find|handle|abs|_intersectsWith|innerHTML|removeData|refreshContainers|toleranceElement|instance|refresh|pointer|id|connected|expression|key|compareDocumentPosition|contains|browser|jQuery|default|scope|prototype|1000|input|cancel|delay|distance|defaults|getter|cancelHelperRemoval|deactivate|receive|show|before|500|animate|drop|_mouseStop|setTimeout|nextSibling|drag|break|up|dynamic|semi|next|prepareOffsets|current|activate|scrollWidth|_preserveHelperProportions|both|hide|marginTop|marginLeft|_mouseStart|clone|apply|typeof|andSelf|static|_mouseCapture|10000|paddingRight|paddingLeft|innerWidth|paddingBottom|paddingTop|innerHeight|removeChild|visibility|nodeName|createElement|String|constructor|_mouseDestroy|unbind|destroy|splice|forcePointerForContainers|join|_|match|attribute|sender|absolutePosition|plugins|_mouseInit|float|_init|mouse|widget|522|version|safari".split("|"),0,{})),JSJAC_HAVEKEYS=!0,JSJAC_NKEYS=16,JSJAC_INACTIVITY=300,JSJAC_ERR_COUNT=10,JSJAC_ALLOW_PLAIN=!0,JSJAC_CHECKQUEUEINTERVAL=1,JSJAC_CHECKINQUEUEINTERVAL=1,JSJAC_TIMERVAL=2e3,JSJACHBC_MAX_HOLD=1,JSJACHBC_MAX_WAIT=300,JSJACHBC_BOSH_VERSION="1.6",JSJACHBC_USE_BOSH_VER=!0,JSJACHBC_MAXPAUSE=120,String.prototype.htmlEnc=function(){var e=this.replace(/&/g,"&amp;");return e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/\"/g,"&quot;"),e=e.replace(/\n/g,"<br />")},Date.jab2date=function(e){var t=new Date(Date.UTC(e.substr(0,4),e.substr(5,2)-1,e.substr(8,2),e.substr(11,2),e.substr(14,2),e.substr(17,2)));if("Z"!=e.substr(e.length-6,1)){var n=new Date;n.setTime(0),n.setUTCHours(e.substr(e.length-5,2)),n.setUTCMinutes(e.substr(e.length-2,2)),"+"==e.substr(e.length-6,1)?t.setTime(t.getTime()-n.getTime()):"-"==e.substr(e.length-6,1)&&t.setTime(t.getTime()+n.getTime())}return t},Date.hrTime=function(e){return Date.jab2date(e).toLocaleString()},Date.prototype.jabberDate=function(){var e=function(e){return 10>e?"0"+e:e},t=this.getUTCFullYear()+"-";return t+=e(this.getUTCMonth()+1)+"-",t+=e(this.getUTCDate())+"T",t+=e(this.getUTCHours())+":",t+=e(this.getUTCMinutes())+":",t+=e(this.getUTCSeconds())+"Z"},Number.max=function(e,t){return e>t?e:t},Number.min=function(e,t){return t>e?e:t};var hexcase=0,b64pad="=",chrsz=8;b64arrays(),atob=function(e){return utf8d2t(b64t2d(e))},btoa=function(e){return b64d2t(utf8t2d(e))},JSJaCJSON.toString=function(e){var t={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n={array:function(e){var t,i,s,r,o=["["],a=e.length;for(s=0;a>s;s+=1)if(r=e[s],i=n[typeof r])try{r=i(r),"string"==typeof r&&(t&&(o[o.length]=","),o[o.length]=r,t=!0)}catch(c){}return o[o.length]="]",o.join("")},"boolean":function(e){return e+""},"null":function(){return"null"},number:function(e){return isFinite(e)?e+"":"null"},object:function(e){if(e){if(e instanceof Array)return n.array(e);var t,i,s,r,o=["{"];for(s in e)if(e.hasOwnProperty(s)&&(r=e[s],i=n[typeof r]))try{r=i(r),"string"==typeof r&&(t&&(o[o.length]=","),o.push(n.string(s),":",r),t=!0)}catch(a){}return o[o.length]="}",o.join("")}return"null"},string:function(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/([\x00-\x1f\\"])/g,function(e,n){var i=t[n];
return i?i:(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})),'"'+e+'"'}};switch(typeof e){case"object":return n.object(e);case"array":return n.array(e)}},JSJaCJSON.parse=function(str){try{return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(str.replace(/"(\\.|[^"\\])*"/g,""))&&eval("("+str+")")}catch(e){return!1}},XmlHttp.create=function(){try{if(window.XMLHttpRequest){var e=new XMLHttpRequest;return null==e.readyState&&(e.readyState=1,e.addEventListener("load",function(){e.readyState=4,"function"==typeof e.onreadystatechange&&e.onreadystatechange()},!1)),e}if(window.ActiveXObject)return new ActiveXObject(XmlHttp.getPrefix()+".XmlHttp")}catch(t){}throw Error("Your browser does not support XmlHttp objects")},XmlHttp.getPrefix=function(){if(XmlHttp.prefix)return XmlHttp.prefix;for(var e,t=["MSXML2","Microsoft","MSXML","MSXML3"],n=0;t.length>n;n++)try{return e=new ActiveXObject(t[n]+".XmlHttp"),XmlHttp.prefix=t[n]}catch(i){}throw Error("Could not find an installed XML parser")},XmlDocument.create=function(e,t){e=e||"foo",t=t||"";try{var n;if(document.implementation&&document.implementation.createDocument?(n=document.implementation.createDocument(t,e,null),null==n.readyState&&(n.readyState=1,n.addEventListener("load",function(){n.readyState=4,"function"==typeof n.onreadystatechange&&n.onreadystatechange()},!1))):window.ActiveXObject&&(n=new ActiveXObject(XmlDocument.getPrefix()+".DomDocument")),!n.documentElement||n.documentElement.tagName!=e||n.documentElement.namespaceURI&&n.documentElement.namespaceURI!=t)try{""!=t?n.appendChild(n.createElement(e)).setAttribute("xmlns",t):n.appendChild(n.createElement(e))}catch(i){n=document.implementation.createDocument(t,e,null),null==n.documentElement&&n.appendChild(n.createElement(e)),""!=t&&n.documentElement.getAttribute("xmlns")!=t&&n.documentElement.setAttribute("xmlns",t)}return n}catch(s){}throw Error("Your browser does not support XmlDocument objects")},XmlDocument.getPrefix=function(){if(XmlDocument.prefix)return XmlDocument.prefix;for(var e,t=["MSXML2","Microsoft","MSXML","MSXML3"],n=0;t.length>n;n++)try{return e=new ActiveXObject(t[n]+".DomDocument"),XmlDocument.prefix=t[n]}catch(i){}throw Error("Could not find an installed XML parser")},"undefined"!=typeof Document&&window.DOMParser&&(Document.prototype.loadXML=function(e){for(var t=(new DOMParser).parseFromString(e,"text/xml");this.hasChildNodes();)this.removeChild(this.lastChild);for(var n=0;t.childNodes.length>n;n++)this.appendChild(this.importNode(t.childNodes[n],!0))}),window.XMLSerializer&&window.Node&&Node.prototype&&Node.prototype.__defineGetter__&&(XMLDocument.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)}),Document.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)}),Node.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)}));var JSJaCBuilder={buildNode:function(e,t){var n,i=arguments[4];if(arguments[2])if(JSJaCBuilder._isStringOrNumber(arguments[2])||arguments[2]instanceof Array)n=this._createElement(e,t,i),JSJaCBuilder._children(e,n,arguments[2]);else{i=arguments[2].xmlns||i,n=this._createElement(e,t,i);for(attr in arguments[2])arguments[2].hasOwnProperty(attr)&&"xmlns"!=attr&&n.setAttribute(attr,arguments[2][attr])}else n=this._createElement(e,t,i);return arguments[3]&&JSJaCBuilder._children(e,n,arguments[3],i),n},_createElement:function(e,t,n){try{if(n)return e.createElementNS(n,t)}catch(i){}var s=e.createElement(t);return n&&s.setAttribute("xmlns",n),s},_text:function(e,t){return e.createTextNode(t)},_children:function(e,t,n,i){if("object"==typeof n){for(var s in n)if(n.hasOwnProperty(s)){var r=n[s];if("object"==typeof r)if(r instanceof Array){var o=JSJaCBuilder.buildNode(e,r[0],r[1],r[2],i);t.appendChild(o)}else t.appendChild(r);else JSJaCBuilder._isStringOrNumber(r)&&t.appendChild(JSJaCBuilder._text(e,r))}}else JSJaCBuilder._isStringOrNumber(n)&&t.appendChild(JSJaCBuilder._text(e,n))},_attributes:function(e){var t=[];for(attribute in e)e.hasOwnProperty(attribute)&&t.push(attribute+'="'+(""+e[attribute]).htmlEnc()+'"');return t.join(" ")},_isStringOrNumber:function(e){return"string"==typeof e||"number"==typeof e}},NS_DISCO_ITEMS="http://jabber.org/protocol/disco#items",NS_DISCO_INFO="http://jabber.org/protocol/disco#info",NS_VCARD="vcard-temp",NS_AUTH="jabber:iq:auth",NS_AUTH_ERROR="jabber:iq:auth:error",NS_REGISTER="jabber:iq:register",NS_SEARCH="jabber:iq:search",NS_ROSTER="jabber:iq:roster",NS_PRIVACY="jabber:iq:privacy",NS_PRIVATE="jabber:iq:private",NS_VERSION="jabber:iq:version",NS_TIME="jabber:iq:time",NS_LAST="jabber:iq:last",NS_XDATA="jabber:x:data",NS_IQDATA="jabber:iq:data",NS_DELAY="jabber:x:delay",NS_EXPIRE="jabber:x:expire",NS_EVENT="jabber:x:event",NS_XCONFERENCE="jabber:x:conference",NS_STATS="http://jabber.org/protocol/stats",NS_MUC="http://jabber.org/protocol/muc",NS_MUC_USER="http://jabber.org/protocol/muc#user",NS_MUC_ADMIN="http://jabber.org/protocol/muc#admin",NS_MUC_OWNER="http://jabber.org/protocol/muc#owner",NS_PUBSUB="http://jabber.org/protocol/pubsub",NS_PUBSUB_EVENT="http://jabber.org/protocol/pubsub#event",NS_PUBSUB_OWNER="http://jabber.org/protocol/pubsub#owner",NS_PUBSUB_NMI="http://jabber.org/protocol/pubsub#node-meta-info",NS_COMMANDS="http://jabber.org/protocol/commands",NS_STREAM="http://etherx.jabber.org/streams",NS_STANZAS="urn:ietf:params:xml:ns:xmpp-stanzas",NS_STREAMS="urn:ietf:params:xml:ns:xmpp-streams",NS_TLS="urn:ietf:params:xml:ns:xmpp-tls",NS_SASL="urn:ietf:params:xml:ns:xmpp-sasl",NS_SESSION="urn:ietf:params:xml:ns:xmpp-session",NS_BIND="urn:ietf:params:xml:ns:xmpp-bind",NS_FEATURE_IQAUTH="http://jabber.org/features/iq-auth",NS_FEATURE_IQREGISTER="http://jabber.org/features/iq-register",NS_FEATURE_COMPRESS="http://jabber.org/features/compress",NS_COMPRESS="http://jabber.org/protocol/compress",ERR_BAD_REQUEST=STANZA_ERROR("400","modify","bad-request"),ERR_CONFLICT=STANZA_ERROR("409","cancel","conflict"),ERR_FEATURE_NOT_IMPLEMENTED=STANZA_ERROR("501","cancel","feature-not-implemented"),ERR_FORBIDDEN=STANZA_ERROR("403","auth","forbidden"),ERR_GONE=STANZA_ERROR("302","modify","gone"),ERR_INTERNAL_SERVER_ERROR=STANZA_ERROR("500","wait","internal-server-error"),ERR_ITEM_NOT_FOUND=STANZA_ERROR("404","cancel","item-not-found"),ERR_JID_MALFORMED=STANZA_ERROR("400","modify","jid-malformed"),ERR_NOT_ACCEPTABLE=STANZA_ERROR("406","modify","not-acceptable"),ERR_NOT_ALLOWED=STANZA_ERROR("405","cancel","not-allowed"),ERR_NOT_AUTHORIZED=STANZA_ERROR("401","auth","not-authorized"),ERR_PAYMENT_REQUIRED=STANZA_ERROR("402","auth","payment-required"),ERR_RECIPIENT_UNAVAILABLE=STANZA_ERROR("404","wait","recipient-unavailable"),ERR_REDIRECT=STANZA_ERROR("302","modify","redirect"),ERR_REGISTRATION_REQUIRED=STANZA_ERROR("407","auth","registration-required"),ERR_REMOTE_SERVER_NOT_FOUND=STANZA_ERROR("404","cancel","remote-server-not-found"),ERR_REMOTE_SERVER_TIMEOUT=STANZA_ERROR("504","wait","remote-server-timeout"),ERR_RESOURCE_CONSTRAINT=STANZA_ERROR("500","wait","resource-constraint"),ERR_SERVICE_UNAVAILABLE=STANZA_ERROR("503","cancel","service-unavailable"),ERR_SUBSCRIPTION_REQUIRED=STANZA_ERROR("407","auth","subscription-required"),ERR_UNEXPECTED_REQUEST=STANZA_ERROR("400","wait","unexpected-request");JSJaCCookie.read=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;n.length>i;i++){for(var s=n[i];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(t))return new JSJaCCookie(e,JSJaCCookie._unescape(s.substring(t.length,s.length)))}throw new JSJaCCookieException("Cookie not found")},JSJaCCookie.get=function(e){return JSJaCCookie.read(e).getValue()},JSJaCCookie.remove=function(e){JSJaCCookie.read(e).erase()},JSJaCCookie._escape=function(e){return e.replace(/;/g,"%3AB")},JSJaCCookie._unescape=function(e){return e.replace(/%3AB/g,";")};var JSJACJID_FORBIDDEN=['"'," ","&","'","/",":","<",">","@"];JSJaCJID.prototype.getNode=function(){return this._node},JSJaCJID.prototype.getDomain=function(){return this._domain},JSJaCJID.prototype.getResource=function(){return this._resource},JSJaCJID.prototype.setNode=function(e){return JSJaCJID._checkNodeName(e),this._node=e||"",this},JSJaCJID.prototype.setDomain=function(e){if(!e||""==e)throw new JSJaCJIDInvalidException("domain name missing");return JSJaCJID._checkNodeName(e),this._domain=e,this},JSJaCJID.prototype.setResource=function(e){return this._resource=e||"",this},JSJaCJID.prototype.toString=function(){var e="";return this.getNode()&&""!=this.getNode()&&(e=this.getNode()+"@"),e+=this.getDomain(),this.getResource()&&""!=this.getResource()&&(e+="/"+this.getResource()),e},JSJaCJID.prototype.removeResource=function(){return this.setResource()},JSJaCJID.prototype.clone=function(){return new JSJaCJID(""+this)},JSJaCJID.prototype.isEntity=function(e){return"string"==typeof e&&(e=new JSJaCJID(e)),e.removeResource(),""+this.clone().removeResource()==""+e},JSJaCJID._checkNodeName=function(e){if(e&&""!=e)for(var t=0;JSJACJID_FORBIDDEN.length>t;t++)if(-1!=e.indexOf(JSJACJID_FORBIDDEN[t]))throw new JSJaCJIDInvalidException("forbidden char in nodename: "+JSJACJID_FORBIDDEN[t])};var JSJACPACKET_USE_XMLNS=!0;JSJaCPacket.prototype.pType=function(){return this.name},JSJaCPacket.prototype.getDoc=function(){return this.doc},JSJaCPacket.prototype.getNode=function(){return this.getDoc()&&this.getDoc().documentElement?this.getDoc().documentElement:null},JSJaCPacket.prototype.setTo=function(e){return e&&""!=e?"string"==typeof e?this.getNode().setAttribute("to",e):this.getNode().setAttribute("to",""+e):this.getNode().removeAttribute("to"),this},JSJaCPacket.prototype.setFrom=function(e){return e&&""!=e?"string"==typeof e?this.getNode().setAttribute("from",e):this.getNode().setAttribute("from",""+e):this.getNode().removeAttribute("from"),this},JSJaCPacket.prototype.setID=function(e){return e&&""!=e?this.getNode().setAttribute("id",e):this.getNode().removeAttribute("id"),this},JSJaCPacket.prototype.setType=function(e){return e&&""!=e?this.getNode().setAttribute("type",e):this.getNode().removeAttribute("type"),this},JSJaCPacket.prototype.setXMLLang=function(e){return e&&""!=e?this.getNode().setAttribute("xml:lang",e):this.getNode().removeAttribute("xml:lang"),this},JSJaCPacket.prototype.getTo=function(){return this.getNode().getAttribute("to")},JSJaCPacket.prototype.getFrom=function(){return this.getNode().getAttribute("from")},JSJaCPacket.prototype.getToJID=function(){return new JSJaCJID(this.getTo())},JSJaCPacket.prototype.getFromJID=function(){return new JSJaCJID(this.getFrom())},JSJaCPacket.prototype.getID=function(){return this.getNode().getAttribute("id")},JSJaCPacket.prototype.getType=function(){return this.getNode().getAttribute("type")},JSJaCPacket.prototype.getXMLLang=function(){return this.getNode().getAttribute("xml:lang")},JSJaCPacket.prototype.getXMLNS=function(){return this.getNode().namespaceURI||this.getNode().getAttribute("xmlns")},JSJaCPacket.prototype.getChild=function(e,t){if(!this.getNode())return null;if(e=e||"*",t=t||"*",this.getNode().getElementsByTagNameNS)return this.getNode().getElementsByTagNameNS(t,e).item(0);var n=this.getNode().getElementsByTagName(e);if("*"==t)return n.item(0);for(var i=0;n.length>i;i++)if(n.item(i).namespaceURI==t||n.item(i).getAttribute("xmlns")==t)return n.item(i);return null},JSJaCPacket.prototype.getChildVal=function(e,t){var n=this.getChild(e,t),i="";if(n&&n.hasChildNodes())for(var s=0;n.childNodes.length>s;s++)n.childNodes.item(s).nodeValue&&(i+=n.childNodes.item(s).nodeValue);return i},JSJaCPacket.prototype.clone=function(){return JSJaCPacket.wrapNode(this.getNode())},JSJaCPacket.prototype.isError=function(){return"error"==this.getType()},JSJaCPacket.prototype.errorReply=function(e){var t=this.clone();return t.setTo(this.getFrom()),t.setFrom(),t.setType("error"),t.appendNode("error",{code:e.code,type:e.type},[[e.cond]]),t},JSJaCPacket.prototype.xml="undefined"!=typeof XMLSerializer?function(){var e=(new XMLSerializer).serializeToString(this.getNode());return e===void 0&&(e=(new XMLSerializer).serializeToString(this.doc)),e}:function(){return this.getDoc().xml},JSJaCPacket.prototype._getAttribute=function(e){return this.getNode().getAttribute(e)},null==document.ELEMENT_NODE&&(document.ELEMENT_NODE=1,document.ATTRIBUTE_NODE=2,document.TEXT_NODE=3,document.CDATA_SECTION_NODE=4,document.ENTITY_REFERENCE_NODE=5,document.ENTITY_NODE=6,document.PROCESSING_INSTRUCTION_NODE=7,document.COMMENT_NODE=8,document.DOCUMENT_NODE=9,document.DOCUMENT_TYPE_NODE=10,document.DOCUMENT_FRAGMENT_NODE=11,document.NOTATION_NODE=12),JSJaCPacket.prototype._importNode=function(e,t){switch(e.nodeType){case document.ELEMENT_NODE:if(this.getDoc().createElementNS)var n=this.getDoc().createElementNS(e.namespaceURI,e.nodeName);else var n=this.getDoc().createElement(e.nodeName);if(e.attributes&&e.attributes.length>0)for(var i=0,s=e.attributes.length;s>i;i++){var r=e.attributes.item(i);("xmlns"!=r.nodeName||null==n.getAttribute("xmlns"))&&(n.setAttributeNS&&r.namespaceURI?n.setAttributeNS(r.namespaceURI,r.nodeName,r.nodeValue):n.setAttribute(r.nodeName,r.nodeValue))}if(t&&e.childNodes&&e.childNodes.length>0)for(var i=0,s=e.childNodes.length;s>i;i++)n.appendChild(this._importNode(e.childNodes.item(i),t));return n;case document.TEXT_NODE:case document.CDATA_SECTION_NODE:case document.COMMENT_NODE:return this.getDoc().createTextNode(e.nodeValue)}},JSJaCPacket.prototype._setChildNode=function(e,t){var n=this.getChild(e),i=this.getDoc().createTextNode(t);if(n)try{n.replaceChild(i,n.firstChild)}catch(s){}else{try{n=this.getDoc().createElementNS(this.getNode().namespaceURI,e)}catch(r){n=this.getDoc().createElement(e)}this.getNode().appendChild(n),n.appendChild(i)}return n},JSJaCPacket.prototype.buildNode=function(e){return JSJaCBuilder.buildNode(this.getDoc(),e,arguments[1],arguments[2])},JSJaCPacket.prototype.appendNode=function(e){return"object"==typeof e?this.getNode().appendChild(e):this.getNode().appendChild(this.buildNode(e,arguments[1],arguments[2],null,this.getNode().namespaceURI))},JSJaCPresence.prototype=new JSJaCPacket,JSJaCPresence.prototype.setStatus=function(e){return this._setChildNode("status",e),this},JSJaCPresence.prototype.setShow=function(e){return("chat"==e||"away"==e||"xa"==e||"dnd"==e)&&this._setChildNode("show",e),this},JSJaCPresence.prototype.setPriority=function(e){return this._setChildNode("priority",e),this},JSJaCPresence.prototype.setPresence=function(e,t,n){return e&&this.setShow(e),t&&this.setStatus(t),n&&this.setPriority(n),this},JSJaCPresence.prototype.getStatus=function(){return this.getChildVal("status")},JSJaCPresence.prototype.getShow=function(){return this.getChildVal("show")},JSJaCPresence.prototype.getPriority=function(){return this.getChildVal("priority")},JSJaCIQ.prototype=new JSJaCPacket,JSJaCIQ.prototype.setIQ=function(e,t,n){return e&&this.setTo(e),t&&this.setType(t),n&&this.setID(n),this},JSJaCIQ.prototype.setQuery=function(e){var t;try{t=this.getDoc().createElementNS(e,"query")}catch(n){t=this.getDoc().createElement("query"),t.setAttribute("xmlns",e)}return this.getNode().appendChild(t),t},JSJaCIQ.prototype.getQuery=function(){return this.getNode().getElementsByTagName("query").item(0)},JSJaCIQ.prototype.getQueryXMLNS=function(){return this.getQuery()?this.getQuery().namespaceURI||this.getQuery().getAttribute("xmlns"):null},JSJaCIQ.prototype.reply=function(e){var t=this.clone();if(t.setTo(this.getFrom()),t.setFrom(),t.setType("result"),e)if("string"==typeof e)t.getChild().appendChild(t.getDoc().loadXML(e));else if(e.constructor==Array)for(var n=t.getChild(),i=0;e.length>i;i++)"string"==typeof e[i]?n.appendChild(t.getDoc().loadXML(e[i])):"object"==typeof e[i]&&n.appendChild(e[i]);else"object"==typeof e&&t.getChild().appendChild(e);return t},JSJaCMessage.prototype=new JSJaCPacket,JSJaCMessage.prototype.setBody=function(e){return this._setChildNode("body",e),this},JSJaCMessage.prototype.setSubject=function(e){return this._setChildNode("subject",e),this},JSJaCMessage.prototype.setThread=function(e){return this._setChildNode("thread",e),this},JSJaCMessage.prototype.getThread=function(){return this.getChildVal("thread")},JSJaCMessage.prototype.getBody=function(){return this.getChildVal("body")},JSJaCMessage.prototype.getSubject=function(){return this.getChildVal("subject")},JSJaCPacket.wrapNode=function(e){var t=null;switch(e.nodeName.toLowerCase()){case"presence":t=new JSJaCPresence;break;case"message":t=new JSJaCMessage;break;case"iq":t=new JSJaCIQ}return t&&t.getDoc().replaceChild(t._importNode(e,!0),t.getNode()),t},JSJaCConnection.prototype.connect=function(e){this._setStatus("connecting"),this.domain=e.domain||"localhost",this.username=e.username,this.resource=e.resource,this.pass=e.pass,this.register=e.register,this.authhost=e.authhost||this.domain,this.authtype=e.authtype||"sasl",e.xmllang&&""!=e.xmllang&&(this._xmllang=e.xmllang),this.host=e.host||this.domain,this.port=e.port||5222,this.secure=e.secure?"true":"false",e.wait&&(this._wait=e.wait),this.jid=this.username+"@"+this.domain,this.fulljid=this.jid+"/"+this.resource,this._rid=Math.round(100000.5+799999.99999*Math.random());var t=this._getFreeSlot();this._req[t]=this._setupRequest(!0);var n=this._getInitialRequestString();this.oDbg.log(n,4),this._req[t].r.onreadystatechange=JSJaC.bind(function(){4==this._req[t].r.readyState&&(this.oDbg.log("async recv: "+this._req[t].r.responseText,4),this._handleInitialResponse(t))},this),this._req[t].r.onerror!==void 0&&(this._req[t].r.onerror=JSJaC.bind(function(){return this.oDbg.log("XmlHttpRequest error",1),!1},this)),this._req[t].r.send(n)},JSJaCConnection.prototype.connected=function(){return this._connected},JSJaCConnection.prototype.disconnect=function(){if(this._setStatus("disconnecting"),this.connected()){this._connected=!1,clearInterval(this._interval),clearInterval(this._inQto),this._timeout&&clearTimeout(this._timeout);var e=this._getFreeSlot();this._req[e]=this._setupRequest(!1),request=this._getRequestString(!1,!0),this.oDbg.log("Disconnecting: "+request,4),this._req[e].r.send(request);try{JSJaCCookie.read(this._cookie_prefix+"JSJaC_State").erase()}catch(t){}this.oDbg.log("Disconnected: "+this._req[e].r.responseText,2),this._handleEvent("ondisconnect")}},JSJaCConnection.prototype.getPollInterval=function(){return this._timerval},JSJaCConnection.prototype.registerHandler=function(event){event=event.toLowerCase();var eArg={handler:arguments[arguments.length-1],childName:"*",childNS:"*",type:"*"};arguments.length>2&&(eArg.childName=arguments[1]),arguments.length>3&&(eArg.childNS=arguments[2]),arguments.length>4&&(eArg.type=arguments[3]),this._events[event]=this._events[event]?this._events[event].concat(eArg):Array(eArg),this._events[event]=this._events[event].sort(function(a,b){var aRank=0,bRank=0;with(a)"*"==type&&aRank++,"*"==childNS&&aRank++,"*"==childName&&aRank++;with(b)"*"==type&&bRank++,"*"==childNS&&bRank++,"*"==childName&&bRank++;return aRank>bRank?1:bRank>aRank?-1:0}),this.oDbg.log("registered handler for event '"+event+"'",2)},JSJaCConnection.prototype.unregisterHandler=function(e,t){if(e=e.toLowerCase(),this._events[e]){for(var n=this._events[e],i=[],s=0;n.length>s;s++)n[s].handler!=t&&i.push(n[s]);n.length!=i.length&&(this._events[e]=i,this.oDbg.log("unregistered handler for event '"+e+"'",2))}},JSJaCConnection.prototype.registerIQGet=function(e,t,n){this.registerHandler("iq",e,t,"get",n)},JSJaCConnection.prototype.registerIQSet=function(e,t,n){this.registerHandler("iq",e,t,"set",n)},JSJaCConnection.prototype.resume=function(){try{var e=JSJaCCookie.read(this._cookie_prefix+"JSJaC_State").getValue();return this.oDbg.log("read cookie: "+e,2),JSJaCCookie.read(this._cookie_prefix+"JSJaC_State").erase(),this.resumeFromData(JSJaCJSON.parse(e))}catch(t){}return!1},JSJaCConnection.prototype.resumeFromData=function(e){try{this._setStatus("resuming");for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);if(this._keys){this._keys2=new JSJaCKeys;for(var n=this._keys2._getSuspendVars(),t=0;n.length>t;t++)this._keys2[n[t]]=this._keys[n[t]];this._keys=this._keys2}return this._connected&&(this._handleEvent("onresume"),setTimeout(JSJaC.bind(this._resume,this),this.getPollInterval()),this._interval=setInterval(JSJaC.bind(this._checkQueue,this),JSJAC_CHECKQUEUEINTERVAL),this._inQto=setInterval(JSJaC.bind(this._checkInQ,this),JSJAC_CHECKINQUEUEINTERVAL)),this._connected===!0}catch(i){return i.message?this.oDbg.log("Resume failed: "+i.message,1):this.oDbg.log("Resume failed: "+i,1),!1}},JSJaCConnection.prototype.send=function(e,t,n){if(!e||!e.pType)return this.oDbg.log("no packet: "+e,1),!1;if(!this.connected())return!1;t&&(e.getID()||e.setID("JSJaCID_"+this._ID++),this._registerPID(e.getID(),t,n));try{this._handleEvent(e.pType()+"_out",e),this._handleEvent("packet_out",e),this._pQueue=this._pQueue.concat(e.xml())}catch(i){return this.oDbg.log(""+i,1),!1}return!0},JSJaCConnection.prototype.sendIQ=function(e,t,n){if(!e||"iq"!=e.pType())return!1;t=t||{};var i=t.error_handler||JSJaC.bind(function(e){this.oDbg.log(e.xml(),1)},this),s=t.result_handler||JSJaC.bind(function(e){this.oDbg.log(e.xml(),2)},this),r=function(e,t){switch(e.getType()){case"error":i(e);break;case"result":s(e,t)}};return this.send(e,r,n)},JSJaCConnection.prototype.setPollInterval=function(e){return e&&!isNaN(e)&&(this._timerval=e),this._timerval},JSJaCConnection.prototype.status=function(){return this._status},JSJaCConnection.prototype.suspend=function(){var e=this.suspendToData();try{var t=new JSJaCCookie(this._cookie_prefix+"JSJaC_State",JSJaCJSON.toString(e));this.oDbg.log("writing cookie: "+t.getValue()+"\n"+"(length:"+t.getValue().length+")",2),t.write();var n=JSJaCCookie.get(this._cookie_prefix+"JSJaC_State");return t.getValue()!=n?(this.oDbg.log("Suspend failed writing cookie.\nread: "+n,1),t.erase(),!1):!0}catch(i){this.oDbg.log("Failed creating cookie '"+this._cookie_prefix+"JSJaC_State': "+i.message,1)}return!1},JSJaCConnection.prototype.suspendToData=function(){clearTimeout(this._timeout),clearInterval(this._interval),clearInterval(this._inQto),this._suspend();var e="_connected,_keys,_ID,_inQ,_pQueue,_regIDs,_errcnt,_inactivity,domain,username,resource,jid,fulljid,_sid,_httpbase,_timerval,_is_polling".split(",");e=e.concat(this._getSuspendVars());for(var t={},n=0;e.length>n;n++)if(this[e[n]]){if(this[e[n]]._getSuspendVars)for(var i=this[e[n]]._getSuspendVars(),s={},r=0;i.length>r;r++)s[i[r]]=this[e[n]][i[r]];else var s=this[e[n]];t[e[n]]=s}return this._connected=!1,this._setStatus("suspending"),t},JSJaCConnection.prototype._abort=function(){clearTimeout(this._timeout),clearInterval(this._inQto),clearInterval(this._interval),this._connected=!1,this._setStatus("aborted"),this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect"),this._handleEvent("onerror",JSJaCError("500","cancel","service-unavailable"))},JSJaCConnection.prototype._checkInQ=function(){for(var e=0;this._inQ.length>e&&10>e;e++){var t=this._inQ[0];this._inQ=this._inQ.slice(1,this._inQ.length);var n=JSJaCPacket.wrapNode(t);if(!n)return;this._handleEvent("packet_in",n),n.pType&&!this._handlePID(n)&&(this._handleEvent(n.pType()+"_in",n),this._handleEvent(n.pType(),n))}},JSJaCConnection.prototype._checkQueue=function(){return 0!=this._pQueue.length&&this._process(),!0},JSJaCConnection.prototype._doAuth=function(){return this.has_sasl&&"nonsasl"==this.authtype&&this.oDbg.log("Warning: SASL present but not used",1),this._doSASLAuth()||this._doLegacyAuth()?!0:(this.oDbg.log("Auth failed for authtype "+this.authtype,1),this.disconnect(),!1)},JSJaCConnection.prototype._doInBandReg=function(){if("saslanon"!=this.authtype&&"anonymous"!=this.authtype){var e=new JSJaCIQ;e.setType("set"),e.setID("reg1"),e.appendNode("query",{xmlns:"jabber:iq:register"},[["username",this.username],["password",this.pass]]),this.send(e,this._doInBandRegDone)}},JSJaCConnection.prototype._doInBandRegDone=function(e){return e&&"error"==e.getType()?(this.oDbg.log("registration failed for "+this.username,0),this._handleEvent("onerror",e.getChild("error")),void 0):(this.oDbg.log(this.username+" registered succesfully",0),this._doAuth(),void 0)},JSJaCConnection.prototype._doLegacyAuth=function(){if("nonsasl"!=this.authtype&&"anonymous"!=this.authtype)return!1;var e=new JSJaCIQ;return e.setIQ(this.server,"get","auth1"),e.appendNode("query",{xmlns:"jabber:iq:auth"},[["username",this.username]]),this.send(e,this._doLegacyAuth2),!0},JSJaCConnection.prototype._doLegacyAuth2=function(e){if(!e||"result"!=e.getType())return e&&"error"==e.getType()&&this._handleEvent("onerror",e.getChild("error")),this.disconnect(),void 0;var t=null!=e.getChild("digest"),e=new JSJaCIQ;if(e.setIQ(this.server,"set","auth2"),query=e.appendNode("query",{xmlns:"jabber:iq:auth"},[["username",this.username],["resource",this.resource]]),t)query.appendChild(e.buildNode("digest",{xmlns:"jabber:iq:auth"},hex_sha1(this.streamid+this.pass)));else{if(!this.allow_plain)return this.oDbg.log("no valid login mechanism found",1),this.disconnect(),!1;query.appendChild(e.buildNode("password",{xmlns:"jabber:iq:auth"},this.pass))}this.send(e,this._doLegacyAuthDone)},JSJaCConnection.prototype._doLegacyAuthDone=function(e){"result"!=e.getType()?("error"==e.getType()&&this._handleEvent("onerror",e.getChild("error")),this.disconnect()):this._handleEvent("onconnect")},JSJaCConnection.prototype._doSASLAuth=function(){if("nonsasl"==this.authtype||"anonymous"==this.authtype)return!1;if("saslanon"==this.authtype){if(this.mechs.ANONYMOUS)return this.oDbg.log("SASL using mechanism 'ANONYMOUS'",2),this._sendRaw("<auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='ANONYMOUS'/>",this._doSASLAuthDone);this.oDbg.log("SASL ANONYMOUS requested but not supported",1)}else{if(this.mechs["DIGEST-MD5"])return this.oDbg.log("SASL using mechanism 'DIGEST-MD5'",2),this._sendRaw("<auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='DIGEST-MD5'/>",this._doSASLAuthDigestMd5S1);if(this.allow_plain&&this.mechs.PLAIN){this.oDbg.log("SASL using mechanism 'PLAIN'",2);var e=this.username+"@"+this.domain+String.fromCharCode(0)+this.username+String.fromCharCode(0)+this.pass;return this.oDbg.log("authenticating with '"+e+"'",2),e=btoa(e),this._sendRaw("<auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='PLAIN'>"+e+"</auth>",this._doSASLAuthDone)}this.oDbg.log("No SASL mechanism applied",1),this.authtype="nonsasl"}return!1},JSJaCConnection.prototype._doSASLAuthDigestMd5S1=function(e){if("challenge"!=e.nodeName)this.oDbg.log("challenge missing",1),this._handleEvent("onerror",JSJaCError("401","auth","not-authorized")),this.disconnect();else{var t=atob(e.firstChild.nodeValue);if(this.oDbg.log("got challenge: "+t,2),this._nonce=t.substring(t.indexOf("nonce=")+7),this._nonce=this._nonce.substring(0,this._nonce.indexOf('"')),this.oDbg.log("nonce: "+this._nonce,2),""==this._nonce||-1!=this._nonce.indexOf('"'))return this.oDbg.log("nonce not valid, aborting",1),this.disconnect(),void 0;this._digest_uri="xmpp/",this._digest_uri+=this.domain,this._cnonce=cnonce(14),this._nc="00000001";var n=str_md5(this.username+":"+this.domain+":"+this.pass)+":"+this._nonce+":"+this._cnonce,i="AUTHENTICATE:"+this._digest_uri,s=hex_md5(hex_md5(n)+":"+this._nonce+":"+this._nc+":"+this._cnonce+":auth:"+hex_md5(i)),r='username="'+this.username+'",realm="'+this.domain+'",nonce="'+this._nonce+'",cnonce="'+this._cnonce+'",nc="'+this._nc+'",qop=auth,digest-uri="'+this._digest_uri+'",response="'+s+'",charset="utf-8"';this.oDbg.log("response: "+r,2),this._sendRaw("<response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>"+binb2b64(str2binb(r))+"</response>",this._doSASLAuthDigestMd5S2)}},JSJaCConnection.prototype._doSASLAuthDigestMd5S2=function(e){if("failure"==e.nodeName)return e.xml?this.oDbg.log("auth error: "+e.xml,1):this.oDbg.log("auth error",1),this._handleEvent("onerror",JSJaCError("401","auth","not-authorized")),this.disconnect(),void 0;var t=atob(e.firstChild.nodeValue);this.oDbg.log("response: "+t,2);var n=t.substring(t.indexOf("rspauth=")+8);this.oDbg.log("rspauth: "+n,2);var i=str_md5(this.username+":"+this.domain+":"+this.pass)+":"+this._nonce+":"+this._cnonce,s=":"+this._digest_uri,r=hex_md5(hex_md5(i)+":"+this._nonce+":"+this._nc+":"+this._cnonce+":auth:"+hex_md5(s));return this.oDbg.log("rsptest: "+r,2),r!=n?(this.oDbg.log("SASL Digest-MD5: server repsonse with wrong rspauth",1),this.disconnect(),void 0):("success"==e.nodeName?this._reInitStream(this.domain,this._doStreamBind):this._sendRaw("<response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/>",this._doSASLAuthDone),void 0)},JSJaCConnection.prototype._doSASLAuthDone=function(e){"success"!=e.nodeName?(this.oDbg.log("auth failed",1),this._handleEvent("onerror",JSJaCError("401","auth","not-authorized")),this.disconnect()):this._reInitStream(this.domain,this._doStreamBind)},JSJaCConnection.prototype._doStreamBind=function(){var e=new JSJaCIQ;e.setIQ(null,"set","bind_1"),e.appendNode("bind",{xmlns:"urn:ietf:params:xml:ns:xmpp-bind"},[["resource",this.resource]]),this.oDbg.log(e.xml()),this.send(e,this._doXMPPSess)},JSJaCConnection.prototype._doXMPPSess=function(e){return"result"!=e.getType()||"error"==e.getType()?(this.disconnect(),"error"==e.getType()&&this._handleEvent("onerror",e.getChild("error")),void 0):(this.fulljid=e.getChildVal("jid"),this.jid=this.fulljid.substring(0,this.fulljid.lastIndexOf("/")),e=new JSJaCIQ,e.setIQ(this.domain,"set","sess_1"),e.appendNode("session",{xmlns:"urn:ietf:params:xml:ns:xmpp-session"},[]),this.oDbg.log(e.xml()),this.send(e,this._doXMPPSessDone),void 0)},JSJaCConnection.prototype._doXMPPSessDone=function(e){return"result"!=e.getType()||"error"==e.getType()?(this.disconnect(),"error"==e.getType()&&this._handleEvent("onerror",e.getChild("error")),void 0):(this._handleEvent("onconnect"),void 0)},JSJaCConnection.prototype._handleEvent=function(e,t){if(e=e.toLowerCase(),this.oDbg.log("incoming event '"+e+"'",3),this._events[e]){this.oDbg.log("handling event '"+e+"'",2);for(var n=0;this._events[e].length>n;n++){var i=this._events[e][n];if("function"==typeof i.handler)try{if(t){if(t.pType){if(!t.getNode().hasChildNodes()&&"*"!=i.childName||t.getNode().hasChildNodes()&&!t.getChild(i.childName,i.childNS))continue;if("*"!=i.type&&t.getType()!=i.type)continue;this.oDbg.log(i.childName+"/"+i.childNS+"/"+i.type+" => match for handler "+i.handler,3)}if(i.handler(t))break}else if(i.handler())break}catch(s){s.fileName&&s.lineNumber?this.oDbg.log(i.handler+"\n>>>"+s.name+": "+s.message+" in "+s.fileName+" line "+s.lineNumber,1):this.oDbg.log(i.handler+"\n>>>"+s.name+": "+s.message,1)}}}},JSJaCConnection.prototype._handlePID=function(e){if(!e.getID())return!1;for(var t in this._regIDs)if(this._regIDs.hasOwnProperty(t)&&this._regIDs[t]&&t==e.getID()){var n=e.getID();this.oDbg.log("handling "+n,3);try{return this._regIDs[t].cb.call(this,e,this._regIDs[t].arg)===!1?!1:(this._unregisterPID(n),!0)}catch(i){return this.oDbg.log(i.name+": "+i.message,1),this._unregisterPID(n),!0}}return!1},JSJaCConnection.prototype._handleResponse=function(e){var t=this._parseResponse(e);if(t)for(var n=0;t.childNodes.length>n;n++)if(this._sendRawCallbacks.length){var i=this._sendRawCallbacks[0];this._sendRawCallbacks=this._sendRawCallbacks.slice(1,this._sendRawCallbacks.length),i.fn.call(this,t.childNodes.item(n),i.arg)}else this._inQ=this._inQ.concat(t.childNodes.item(n))},JSJaCConnection.prototype._parseStreamFeatures=function(e){if(!e)return this.oDbg.log("nothing to parse ... aborting",1),!1;var t;if(e.getElementsByTagNameNS)t=e.getElementsByTagNameNS("http://etherx.jabber.org/streams","error").item(0);else for(var n=e.getElementsByTagName("error"),i=0;n.length>i;i++)if("http://etherx.jabber.org/streams"==n.item(i).namespaceURI){t=n.item(i);break}if(t)return this._setStatus("internal_server_error"),clearTimeout(this._timeout),clearInterval(this._interval),clearInterval(this._inQto),this._handleEvent("onerror",JSJaCError("503","cancel","session-terminate")),this._connected=!1,this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect"),!1;
this.mechs={};var s=e.getElementsByTagName("mechanisms");this.has_sasl=!1;for(var i=0;s.length>i;i++)if("urn:ietf:params:xml:ns:xmpp-sasl"==s.item(i).getAttribute("xmlns")){this.has_sasl=!0;for(var r=s.item(i).getElementsByTagName("mechanism"),o=0;r.length>o;o++)this.mechs[r.item(o).firstChild.nodeValue]=!0;break}return this.has_sasl?(this.oDbg.log("SASL detected",2),!0):(this.oDbg.log("No support for SASL detected",2),!1)},JSJaCConnection.prototype._process=function(e){if(!this.connected())return this.oDbg.log("Connection lost ...",1),this._interval&&clearInterval(this._interval),void 0;this.setPollInterval(e),this._timeout&&clearTimeout(this._timeout);var t=this._getFreeSlot();if(!(0>t)){if(this._req[t]!==void 0&&this._req[t].r!==void 0&&4!=this._req[t].r.readyState)return this.oDbg.log("Slot "+t+" is not ready"),void 0;if(!this.isPolling()&&0==this._pQueue.length&&this._req[(t+1)%2]&&4!=this._req[(t+1)%2].r.readyState)return this.oDbg.log("all slots busy, standby ...",2),void 0;this.isPolling()||this.oDbg.log("Found working slot at "+t,2),this._req[t]=this._setupRequest(!0),this._req[t].r.onreadystatechange=JSJaC.bind(function(){this.connected()&&4==this._req[t].r.readyState&&(this._setStatus("processing"),this.oDbg.log("async recv: "+this._req[t].r.responseText,4),this._handleResponse(this._req[t]),this._pQueue.length?this._timeout=setTimeout(JSJaC.bind(this._process,this),100):(this.oDbg.log("scheduling next poll in "+this.getPollInterval()+" msec",4),this._timeout=setTimeout(JSJaC.bind(this._process,this),this.getPollInterval())))},this);try{this._req[t].r.onerror=JSJaC.bind(function(){return this.connected()?(this._errcnt++,this.oDbg.log("XmlHttpRequest error ("+this._errcnt+")",1),this._errcnt>JSJAC_ERR_COUNT?(this._abort(),!1):(this._setStatus("onerror_fallback"),setTimeout(JSJaC.bind(this._resume,this),this.getPollInterval()),!1)):void 0},this)}catch(n){}var i=this._getRequestString();this._rid!==void 0&&(this._req[t].rid=this._rid),this.oDbg.log("sending: "+i,4),this._req[t].r.send(i)}},JSJaCConnection.prototype._registerPID=function(e,t,n){return e&&t?(this._regIDs[e]={},this._regIDs[e].cb=t,n&&(this._regIDs[e].arg=n),this.oDbg.log("registered "+e,3),!0):!1},JSJaCConnection.prototype._sendEmpty=function JSJaCSendEmpty(){var e=this._getFreeSlot();this._req[e]=this._setupRequest(!0),this._req[e].r.onreadystatechange=JSJaC.bind(function(){4==this._req[e].r.readyState&&(this.oDbg.log("async recv: "+this._req[e].r.responseText,4),this._getStreamID(e))},this),this._req[e].r.onerror!==void 0&&(this._req[e].r.onerror=JSJaC.bind(function(){return this.oDbg.log("XmlHttpRequest error",1),!1},this));var t=this._getRequestString();this.oDbg.log("sending: "+t,4),this._req[e].r.send(t)},JSJaCConnection.prototype._sendRaw=function(e,t,n){return t&&this._sendRawCallbacks.push({fn:t,arg:n}),this._pQueue.push(e),this._process(),!0},JSJaCConnection.prototype._setStatus=function(e){e&&""!=e&&e!=this._status&&(this._status=e,this._handleEvent("onstatuschanged",e),this._handleEvent("status_changed",e))},JSJaCConnection.prototype._unregisterPID=function(e){return this._regIDs[e]?(this._regIDs[e]=null,this.oDbg.log("unregistered "+e,3),!0):!1},JSJaCHttpBindingConnection.prototype=new JSJaCConnection,JSJaCHttpBindingConnection.prototype.inherit=function(e){if(e.jid){var t=new JSJaCJID(e.jid);this.domain=t.getDomain(),this.username=t.getNode(),this.resource=t.getResource()}else this.domain=e.domain||"localhost",this.username=e.username,this.resource=e.resource;this._sid=e.sid,this._rid=e.rid,this._min_polling=e.polling,this._inactivity=e.inactivity,this._setHold(e.requests-1),this.setPollInterval(this._timerval),e.wait&&(this._wait=e.wait),this._connected=!0,this._handleEvent("onconnect"),this._interval=setInterval(JSJaC.bind(this._checkQueue,this),JSJAC_CHECKQUEUEINTERVAL),this._inQto=setInterval(JSJaC.bind(this._checkInQ,this),JSJAC_CHECKINQUEUEINTERVAL),this._timeout=setTimeout(JSJaC.bind(this._process,this),this.getPollInterval())},JSJaCHttpBindingConnection.prototype.setPollInterval=function(e){return e&&!isNaN(e)&&(this._timerval=this.isPolling()?this._min_polling&&1e3*this._min_polling>e?1e3*this._min_polling:this._inactivity&&e>1e3*this._inactivity?1e3*this._inactivity:e:100),this._timerval},JSJaCHttpBindingConnection.prototype.isPolling=function(){return 0==this._hold},JSJaCHttpBindingConnection.prototype._getFreeSlot=function(){for(var e=0;this._hold+1>e;e++)if(this._req[e]===void 0||this._req[e].r===void 0||4==this._req[e].r.readyState)return e;return-1},JSJaCHttpBindingConnection.prototype._getHold=function(){return this._hold},JSJaCHttpBindingConnection.prototype._getRequestString=function(e,t){e=e||"";var n="";if(this._rid<=this._last_rid&&this._last_requests[this._rid]!==void 0)n=this._last_requests[this._rid].xml;else{for(var i="";this._pQueue.length;){var s=this._pQueue[0];i+=s,this._pQueue=this._pQueue.slice(1,this._pQueue.length)}n="<body rid='"+this._rid+"' sid='"+this._sid+"' xmlns='http://jabber.org/protocol/httpbind' ",JSJAC_HAVEKEYS&&(n+="key='"+this._keys.getKey()+"' ",this._keys.lastKey()&&(this._keys=new JSJaCKeys(hex_sha1,this.oDbg),n+="newkey='"+this._keys.getKey()+"' ")),t?n+="type='terminate'":this._reinit&&(JSJACHBC_USE_BOSH_VER&&(n+="xmpp:restart='true' xmlns:xmpp='urn:xmpp:xbosh'"),this._reinit=!1),n+=""!=i||""!=e?">"+e+i+"</body>":"/>",this._last_requests[this._rid]={},this._last_requests[this._rid].xml=n,this._last_rid=this._rid;for(var r in this._last_requests)this._last_requests.hasOwnProperty(r)&&this._rid-this._hold>r&&delete this._last_requests[r]}return n},JSJaCHttpBindingConnection.prototype._getInitialRequestString=function(){var e="<body content='text/xml; charset=utf-8' hold='"+this._hold+"' xmlns='http://jabber.org/protocol/httpbind' to='"+this.authhost+"' wait='"+this._wait+"' rid='"+this._rid+"'";return(this.host||this.port)&&(e+=" route='xmpp:"+this.host+":"+this.port+"'"),this.secure&&(e+=" secure='"+this.secure+"'"),JSJAC_HAVEKEYS&&(this._keys=new JSJaCKeys(hex_sha1,this.oDbg),key=this._keys.getKey(),e+=" newkey='"+key+"'"),this._xmllang&&(e+=" xml:lang='"+this._xmllang+"'"),JSJACHBC_USE_BOSH_VER&&(e+=" ver='"+JSJACHBC_BOSH_VERSION+"'",e+=" xmlns:xmpp='urn:xmpp:xbosh'",("sasl"==this.authtype||"saslanon"==this.authtype)&&(e+=" xmpp:version='1.0'")),e+="/>"},JSJaCHttpBindingConnection.prototype._getStreamID=function(e){if(this.oDbg.log(this._req[e].r.responseText,4),!this._req[e].r.responseXML||!this._req[e].r.responseXML.documentElement)return this._handleEvent("onerror",JSJaCError("503","cancel","service-unavailable")),void 0;var t=this._req[e].r.responseXML.documentElement;return t.getAttribute("authid")&&(this.streamid=t.getAttribute("authid"),this.oDbg.log("got streamid: "+this.streamid,2)),this._parseStreamFeatures(t)&&this.streamid?(this._timeout=setTimeout(JSJaC.bind(this._process,this),this.getPollInterval()),this.register?this._doInBandReg():this._doAuth(),void 0):(this._timeout=setTimeout(JSJaC.bind(this._sendEmpty,this),this.getPollInterval()),void 0)},JSJaCHttpBindingConnection.prototype._getSuspendVars=function(){return"host,port,secure,_rid,_last_rid,_wait,_min_polling,_inactivity,_hold,_last_requests,_pause".split(",")},JSJaCHttpBindingConnection.prototype._handleInitialResponse=function(e){try{this.oDbg.log(this._req[e].r.getAllResponseHeaders(),4),this.oDbg.log(this._req[e].r.responseText,4)}catch(t){this.oDbg.log("No response",4)}if(200!=this._req[e].r.status||!this._req[e].r.responseXML)return this.oDbg.log("initial response broken (status: "+this._req[e].r.status+")",1),this._handleEvent("onerror",JSJaCError("503","cancel","service-unavailable")),void 0;var n=this._req[e].r.responseXML.documentElement;return n&&"body"==n.tagName&&"http://jabber.org/protocol/httpbind"==n.namespaceURI?"terminate"==n.getAttribute("type")?(this.oDbg.log("invalid response:\n"+this._req[e].r.responseText,1),clearTimeout(this._timeout),this._connected=!1,this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect"),this._handleEvent("onerror",JSJaCError("503","cancel","service-unavailable")),void 0):(this._sid=n.getAttribute("sid"),this.oDbg.log("got sid: "+this._sid,2),n.getAttribute("polling")&&(this._min_polling=n.getAttribute("polling")),n.getAttribute("inactivity")&&(this._inactivity=n.getAttribute("inactivity")),n.getAttribute("requests")&&this._setHold(n.getAttribute("requests")-1),this.oDbg.log("set hold to "+this._getHold(),2),n.getAttribute("ver")&&(this._bosh_version=n.getAttribute("ver")),n.getAttribute("maxpause")&&(this._pause=Number.min(n.getAttribute("maxpause"),JSJACHBC_MAXPAUSE)),this.setPollInterval(this._timerval),this._connected=!0,this._inQto=setInterval(JSJaC.bind(this._checkInQ,this),JSJAC_CHECKINQUEUEINTERVAL),this._interval=setInterval(JSJaC.bind(this._checkQueue,this),JSJAC_CHECKQUEUEINTERVAL),this._getStreamID(e),void 0):(this.oDbg.log("no body element or incorrect body in initial response",1),this._handleEvent("onerror",JSJaCError("500","wait","internal-service-error")),void 0)},JSJaCHttpBindingConnection.prototype._parseResponse=function(e){if(!this.connected()||!e)return null;var t=e.r;try{if(404==t.status||403==t.status)return this._abort(),null;if(200!=t.status||!t.responseXML){this._errcnt++;var n="invalid response ("+t.status+"):\n"+t.getAllResponseHeaders()+"\n"+t.responseText;return t.responseXML||(n+="\nResponse failed to parse!"),this.oDbg.log(n,1),this._errcnt>JSJAC_ERR_COUNT?(this._abort(),null):(this.connected()&&(this.oDbg.log("repeating ("+this._errcnt+")",1),this._setStatus("proto_error_fallback"),setTimeout(JSJaC.bind(this._resume,this),this.getPollInterval())),null)}}catch(i){return this.oDbg.log("XMLHttpRequest error: status not available",1),this._errcnt++,this._errcnt>JSJAC_ERR_COUNT?this._abort():this.connected()&&(this.oDbg.log("repeating ("+this._errcnt+")",1),this._setStatus("proto_error_fallback"),setTimeout(JSJaC.bind(this._resume,this),this.getPollInterval())),null}var s=t.responseXML.documentElement;if(!s||"body"!=s.tagName||"http://jabber.org/protocol/httpbind"!=s.namespaceURI)return this.oDbg.log("invalid response:\n"+t.responseText,1),clearTimeout(this._timeout),clearInterval(this._interval),clearInterval(this._inQto),this._connected=!1,this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect"),this._setStatus("internal_server_error"),this._handleEvent("onerror",JSJaCError("500","wait","internal-server-error")),null;if(e.rid!==void 0&&this._last_requests[e.rid]){if(this._last_requests[e.rid].handled)return this.oDbg.log("already handled "+e.rid,2),null;this._last_requests[e.rid].handled=!0}if("terminate"==s.getAttribute("type")){this.oDbg.log("session terminated:\n"+t.responseText,1),clearTimeout(this._timeout),clearInterval(this._interval),clearInterval(this._inQto);var r=s.getAttribute("condition");return"remote-stream-error"==r&&s.getElementsByTagName("conflict").length>0&&this._setStatus("session-terminate-conflict"),null==r&&(r="session-terminate"),this._handleEvent("onerror",JSJaCError("503","cancel",r)),this._connected=!1,this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect"),null}return this._errcnt=0,t.responseXML.documentElement},JSJaCHttpBindingConnection.prototype._reInitStream=function(e,t,n){this._reinit=!0,t.call(this,n)},JSJaCHttpBindingConnection.prototype._resume=function(){0==this._pause&&this._rid>=this._last_rid&&(this._rid=this._last_rid-1),this._process()},JSJaCHttpBindingConnection.prototype._setHold=function(e){return!e||isNaN(e)||0>e?e=0:e>JSJACHBC_MAX_HOLD&&(e=JSJACHBC_MAX_HOLD),this._hold=e,this._hold},JSJaCHttpBindingConnection.prototype._setupRequest=function(e){var t={},n=XmlHttp.create();try{n.open("POST",this._httpbase,e),n.setRequestHeader("Content-Type","text/xml; charset=utf-8")}catch(i){this.oDbg.log(i,1)}return t.r=n,this._rid++,t.rid=this._rid,t},JSJaCHttpBindingConnection.prototype._suspend=function(){if(0!=this._pause){var e=this._getFreeSlot();this._req[e]=this._setupRequest(!1);var t="<body pause='"+this._pause+"' xmlns='http://jabber.org/protocol/httpbind' sid='"+this._sid+"' rid='"+this._rid+"'";for(JSJAC_HAVEKEYS&&(t+=" key='"+this._keys.getKey()+"'",this._keys.lastKey()&&(this._keys=new JSJaCKeys(hex_sha1,this.oDbg),t+=" newkey='"+this._keys.getKey()+"'")),t+=">";this._pQueue.length;){var n=this._pQueue[0];t+=n,this._pQueue=this._pQueue.slice(1,this._pQueue.length)}t+="</body>",this.oDbg.log("Disconnecting: "+t,4),this._req[e].r.send(t)}},JSJaCHttpPollingConnection.prototype=new JSJaCConnection,JSJaCHttpPollingConnection.prototype.isPolling=function(){return!0},JSJaCHttpPollingConnection.prototype._getFreeSlot=function(){return this._req[0]===void 0||this._req[0].r===void 0||4==this._req[0].r.readyState?0:-1},JSJaCHttpPollingConnection.prototype._getInitialRequestString=function(){var e="0";JSJAC_HAVEKEYS&&(this._keys=new JSJaCKeys(b64_sha1,this.oDbg),key=this._keys.getKey(),e+=";"+key);var t=this.domain;return this.authhost&&(t=this.authhost),e+=",<stream:stream to='"+t+"' xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'",("sasl"==this.authtype||"saslanon"==this.authtype)&&(e+=" version='1.0'"),e+=">"},JSJaCHttpPollingConnection.prototype._getRequestString=function(e,t){var n=this._sid;for(JSJAC_HAVEKEYS&&(n+=";"+this._keys.getKey(),this._keys.lastKey()&&(this._keys=new JSJaCKeys(b64_sha1,this.oDbg),n+=";"+this._keys.getKey())),n+=",",e&&(n+=e);this._pQueue.length;)n+=this._pQueue[0],this._pQueue=this._pQueue.slice(1,this._pQueue.length);return t&&(n+="</stream:stream>"),n},JSJaCHttpPollingConnection.prototype._getStreamID=function(){if(""==this._req[0].r.responseText)return this.oDbg.log("waiting for stream id",2),this._timeout=setTimeout(JSJaC.bind(this._sendEmpty,this),1e3),void 0;this.oDbg.log(this._req[0].r.responseText,4),this._req[0].r.responseText.match(/id=[\'\"]([^\'\"]+)[\'\"]/)&&(this.streamid=RegExp.$1),this.oDbg.log("got streamid: "+this.streamid,2);var e;try{var t=this._req[0].r.responseText;if(t.match(/<\/stream:stream>\s*$/)||(t+="</stream:stream>"),e=XmlDocument.create("doc"),e.loadXML(t),!this._parseStreamFeatures(e))return this.authtype="nonsasl",void 0}catch(n){this.oDbg.log("loadXML: "+(""+n),1)}this._connected=!0,this.register?this._doInBandReg():this._doAuth(),this._process(this._timerval)},JSJaCHttpPollingConnection.prototype._getSuspendVars=function(){return[]},JSJaCHttpPollingConnection.prototype._handleInitialResponse=function(){this.oDbg.log(this._req[0].r.getAllResponseHeaders(),4);var e=this._req[0].r.getResponseHeader("Set-Cookie");e=e.split(";");for(var t=0;e.length>t;t++)aArg=e[t].split("="),"ID"==aArg[0]&&(this._sid=aArg[1]);this.oDbg.log("got sid: "+this._sid,2),this._connected=!0,this._interval=setInterval(JSJaC.bind(this._checkQueue,this),JSJAC_CHECKQUEUEINTERVAL),this._inQto=setInterval(JSJaC.bind(this._checkInQ,this),JSJAC_CHECKINQUEUEINTERVAL),this._getStreamID()},JSJaCHttpPollingConnection.prototype._parseResponse=function(e){var t=e.r;if(!this.connected())return null;if(200!=t.status)return this.oDbg.log("invalid response ("+t.status+"):"+t.responseText+"\n"+t.getAllResponseHeaders(),1),this._setStatus("internal_server_error"),clearTimeout(this._timeout),clearInterval(this._interval),clearInterval(this._inQto),this._connected=!1,this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect"),this._handleEvent("onerror",JSJaCError("503","cancel","service-unavailable")),null;this.oDbg.log(t.getAllResponseHeaders(),4);var n,i=t.getResponseHeader("Set-Cookie");if(null==i)n="-1:0";else{i=i.split(";");for(var n,s=0;i.length>s;s++){var r=i[s].split("=");"ID"==r[0]&&(n=r[1])}}if(n!==void 0&&-1!=n.indexOf(":0")){switch(n.substring(0,n.indexOf(":0"))){case"0":this.oDbg.log("invalid response:"+t.responseText,1);break;case"-1":this.oDbg.log("Internal Server Error",1);break;case"-2":this.oDbg.log("Bad Request",1);break;case"-3":this.oDbg.log("Key Sequence Error",1)}return this._setStatus("internal_server_error"),clearTimeout(this._timeout),clearInterval(this._interval),clearInterval(this._inQto),this._handleEvent("onerror",JSJaCError("500","wait","internal-server-error")),this._connected=!1,this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect"),null}if(!t.responseText||""==t.responseText)return null;try{var o=t.responseText.replace(/\<\?xml.+\?\>/,"");o.match(/<stream:stream/)&&(o+="</stream:stream>");var a=JSJaCHttpPollingConnection._parseTree("<body>"+o+"</body>");return a&&"parsererror"!=a.tagName?a:(this.oDbg.log("parsererror",1),a=JSJaCHttpPollingConnection._parseTree("<stream:stream xmlns:stream='http://etherx.jabber.org/streams'>"+t.responseText),a&&"parsererror"!=a.tagName?(this.oDbg.log("stream closed",1),a.getElementsByTagName("conflict").length>0&&this._setStatus("session-terminate-conflict"),clearTimeout(this._timeout),clearInterval(this._interval),clearInterval(this._inQto),this._handleEvent("onerror",JSJaCError("503","cancel","session-terminate")),this._connected=!1,this.oDbg.log("Disconnected.",1),this._handleEvent("ondisconnect")):this.oDbg.log("parsererror:"+a,1),a)}catch(c){this.oDbg.log("parse error:"+c.message,1)}return null},JSJaCHttpPollingConnection.prototype._reInitStream=function(e,t,n){this._sendRaw("<stream:stream xmlns:stream='http://etherx.jabber.org/streams' xmlns='jabber:client' to='"+e+"' version='1.0'>",t,n)},JSJaCHttpPollingConnection.prototype._resume=function(){this._process(this._timerval)},JSJaCHttpPollingConnection.prototype._setupRequest=function(e){var t=XmlHttp.create();try{t.open("POST",this._httpbase,e),t.overrideMimeType&&t.overrideMimeType("text/plain; charset=utf-8"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(n){this.oDbg.log(n,1)}var i={};return i.r=t,i},JSJaCHttpPollingConnection.prototype._suspend=function(){},JSJaCHttpPollingConnection._parseTree=function(e){try{var t=XmlDocument.create("body","foo");if(t.loadXML!==void 0)return t.loadXML(e),t.documentElement;if(window.DOMParser)return(new DOMParser).parseFromString(e,"text/xml").documentElement}catch(n){}return null};var JSJaC={Version:"$Rev$",require:function(e){document.write('<script type="text/javascript" src="'+e+'"></script>')},load:function(){for(var e=["xmlextras","jsextras","crypt","JSJaCConfig","JSJaCConstants","JSJaCCookie","JSJaCJSON","JSJaCJID","JSJaCBuilder","JSJaCPacket","JSJaCError","JSJaCKeys","JSJaCConnection","JSJaCHttpPollingConnection","JSJaCHttpBindingConnection","JSJaCConsoleLogger"],t=document.getElementsByTagName("script"),n="./",i=0;t.length>i;i++)if(t.item(i).src&&t.item(i).src.match(/JSJaC\.js$/)){n=t.item(i).src.replace(/JSJaC.js$/,"");break}for(var i=0;e.length>i;i++)this.require(n+e[i]+".js")},bind:function(e,t,n){return function(i){return e.apply(t,[i,n])}}};JSJaCConnection===void 0&&JSJaC.load();var CachePriority={Low:1,Normal:2,High:4};Cache.prototype.getItem=function(e){var t=this.items[e];null!=t&&(this._isExpired(t)?(this._removeItem(e),t=null):t.lastAccessed=(new Date).getTime());var n=null;return null!=t?(n=t.value,this.stats.hits++):this.stats.misses++,n},Cache.prototype.setItem=function(e,t,n){function i(e,t,n){if(null==e||""==e)throw Error("key cannot be null or empty");this.key=e,this.value=t,null==n&&(n={}),null!=n.expirationAbsolute&&(n.expirationAbsolute=n.expirationAbsolute.getTime()),null==n.priority&&(n.priority=CachePriority.Normal),this.options=n,this.lastAccessed=(new Date).getTime()}null!=this.items[e]&&this._removeItem(e),this._addItem(new i(e,t,n)),this.maxSize>0&&this.count>this.maxSize&&this._purge()},Cache.prototype.clear=function(){for(var e in this.items)this._removeItem(e)},Cache.prototype._purge=function(){var e=[];for(var t in this.items){var n=this.items[t];this._isExpired(n)?this._removeItem(t):e.push(n)}if(e.length>this.purgeSize)for(e=e.sort(function(e,t){return e.options.priority!=t.options.priority?t.options.priority-e.options.priority:t.lastAccessed-e.lastAccessed});e.length>this.purgeSize;){var i=e.pop();this._removeItem(i.key)}},Cache.prototype._addItem=function(e){this.items[e.key]=e,this.count++},Cache.prototype._removeItem=function(e){var t=this.items[e];if(delete this.items[e],this.count--,null!=t.options.callback){var n=function(){t.options.callback(t.key,t.value)};setTimeout(n,0)}},Cache.prototype._isExpired=function(e){var t=(new Date).getTime(),n=!1;if(e.options.expirationAbsolute&&t>e.options.expirationAbsolute&&(n=!0),0==n&&e.options.expirationSliding){var i=e.lastAccessed+1e3*e.options.expirationSliding;t>i&&(n=!0)}return n},Cache.prototype.toHtmlString=function(){var e=this.count+" item(s) in cache<br /><ul>";for(var t in this.items){var n=this.items[t];e=e+"<li>"+(""+n.key)+" = "+(""+n.value)+"</li>"}return e+="</ul>"},this.JSON||(this.JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,s,r,o,a=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?c+"":"null";case"boolean":case"null":return c+"";case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(r=c.length,n=0;r>n;n+=1)o[n]=str(n,c)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)i=rep[n],"string"==typeof i&&(s=str(i,c),s&&o.push(quote(i)+(gap?": ":":")+s));else for(i in c)Object.hasOwnProperty.call(c,i)&&(s=str(i,c),s&&o.push(quote(i)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,s=e[t];if(s&&"object"==typeof s)for(n in s)Object.hasOwnProperty.call(s,n)&&(i=walk(s,n),void 0!==i?s[n]=i:delete s[n]);return reviver.call(e,t,s)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var swfobject=function(){function e(){if(!U){try{var e=F.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(t){return}U=!0;for(var n=H.length,i=0;n>i;i++)H[i]()}}function t(e){U?e():H[H.length]=e}function n(e){if(typeof M.addEventListener!=k)M.addEventListener("load",e,!1);else if(typeof F.addEventListener!=k)F.addEventListener("load",e,!1);else if(typeof M.attachEvent!=k)_(M,"onload",e);else if("function"==typeof M.onload){var t=M.onload;M.onload=function(){t(),e()}}else M.onload=e}function i(){O?s():r()}function s(){var e=F.getElementsByTagName("body")[0],t=m(T);t.setAttribute("type",x);var n=e.appendChild(t);if(n){var i=0;(function(){if(typeof n.GetVariable!=k){var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),Q.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(10>i)return i++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),n=null,r()})()}else r()}function r(){var e=B.length;if(e>0)for(var t=0;e>t;t++){var n=B[t].id,i=B[t].callbackFn,s={success:!1,id:n};if(Q.pv[0]>0){var r=f(n);if(r)if(!C(B[t].swfVersion)||Q.wk&&312>Q.wk)if(B[t].expressInstall&&a()){var l={};l.data=B[t].expressInstall,l.width=r.getAttribute("width")||"0",l.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(l.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(l.align=r.getAttribute("align"));for(var u={},d=r.getElementsByTagName("param"),p=d.length,g=0;p>g;g++)"movie"!=d[g].getAttribute("name").toLowerCase()&&(u[d[g].getAttribute("name")]=d[g].getAttribute("value"));c(l,u,n,i)}else h(r),i&&i(s);else b(n,!0),i&&(s.success=!0,s.ref=o(n),i(s))}else if(b(n,!0),i){var m=o(n);m&&typeof m.SetVariable!=k&&(s.success=!0,s.ref=m),i(s)}}}function o(e){var t=null,n=f(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=k)t=n;else{var i=n.getElementsByTagName(T)[0];i&&(t=i)}return t}function a(){return!G&&C("6.0.65")&&(Q.win||Q.mac)&&!(Q.wk&&312>Q.wk)}function c(e,t,n,i){G=!0,E=i||null,D={success:!1,id:n};var s=f(n);if(s){"OBJECT"==s.nodeName?(y=l(s),J=null):(y=s,J=n),e.id=R,(typeof e.width==k||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==k||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var r=Q.ie&&Q.win?"ActiveX":"PlugIn",o="MMredirectURL="+(""+M.location).replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+F.title;if(typeof t.flashvars!=k?t.flashvars+="&"+o:t.flashvars=o,Q.ie&&Q.win&&4!=s.readyState){var a=m("div");n+="SWFObjectNew",a.setAttribute("id",n),s.parentNode.insertBefore(a,s),s.style.display="none",function(){4==s.readyState?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}u(e,t,n)}}function h(e){if(Q.ie&&Q.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(l(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(l(e),e)}function l(e){var t=m("div");if(Q.win&&Q.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(T)[0];if(n){var i=n.childNodes;if(i)for(var s=i.length,r=0;s>r;r++)1==i[r].nodeType&&"PARAM"==i[r].nodeName||8==i[r].nodeType||t.appendChild(i[r].cloneNode(!0))}}return t}function u(e,t,n){var i,s=f(n);if(Q.wk&&312>Q.wk)return i;if(s)if(typeof e.id==k&&(e.id=n),Q.ie&&Q.win){var r="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?r+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(r+=" "+o+'="'+e[o]+'"'));var a="";for(var c in t)t[c]!=Object.prototype[c]&&(a+='<param name="'+c+'" value="'+t[c]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+a+"</object>",j[j.length]=e.id,i=f(e.id)}else{var h=m(T);h.setAttribute("type",x);for(var l in e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?h.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&h.setAttribute(l,e[l]));for(var u in t)t[u]!=Object.prototype[u]&&"movie"!=u.toLowerCase()&&d(h,u,t[u]);s.parentNode.replaceChild(h,s),i=h}return i}function d(e,t,n){var i=m("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=f(e);t&&"OBJECT"==t.nodeName&&(Q.ie&&Q.win?(t.style.display="none",function(){4==t.readyState?g(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function g(e){var t=f(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function f(e){var t=null;try{t=F.getElementById(e)}catch(n){}return t}function m(e){return F.createElement(e)}function _(e,t,n){e.attachEvent(t,n),q[q.length]=[e,t,n]}function C(e){var t=Q.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function v(e,t,n,i){if(!Q.ie||!Q.mac){var s=F.getElementsByTagName("head")[0];if(s){var r=n&&"string"==typeof n?n:"screen";if(i&&(w=null,N=null),!w||N!=r){var o=m("style");o.setAttribute("type","text/css"),o.setAttribute("media",r),w=s.appendChild(o),Q.ie&&Q.win&&typeof F.styleSheets!=k&&F.styleSheets.length>0&&(w=F.styleSheets[F.styleSheets.length-1]),N=r}Q.ie&&Q.win?w&&typeof w.addRule==T&&w.addRule(e,t):w&&typeof F.createTextNode!=k&&w.appendChild(F.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if($){var n=t?"visible":"hidden";U&&f(e)?f(e).style.visibility=n:v("#"+e,"visibility:"+n)}}function S(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=k?encodeURIComponent(e):e}var y,J,E,D,w,N,k="undefined",T="object",I="Shockwave Flash",A="ShockwaveFlash.ShockwaveFlash",x="application/x-shockwave-flash",R="SWFObjectExprInst",P="onreadystatechange",M=window,F=document,L=navigator,O=!1,H=[i],B=[],j=[],q=[],U=!1,G=!1,$=!0,Q=function(){var e=typeof F.getElementById!=k&&typeof F.getElementsByTagName!=k&&typeof F.createElement!=k,t=L.userAgent.toLowerCase(),n=L.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),s=n?/mac/.test(n):/mac/.test(t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,a=[0,0,0],c=null;if(typeof L.plugins!=k&&typeof L.plugins[I]==T)c=L.plugins[I].description,!c||typeof L.mimeTypes!=k&&L.mimeTypes[x]&&!L.mimeTypes[x].enabledPlugin||(O=!0,o=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M.ActiveXObject!=k)try{var h=new ActiveXObject(A);h&&(c=h.GetVariable("$version"),c&&(o=!0,c=c.split(" ")[1].split(","),a=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]))}catch(l){}return{w3:e,pv:a,wk:r,ie:o,win:i,mac:s}}();return function(){Q.w3&&((typeof F.readyState!=k&&"complete"==F.readyState||typeof F.readyState==k&&(F.getElementsByTagName("body")[0]||F.body))&&e(),U||(typeof F.addEventListener!=k&&F.addEventListener("DOMContentLoaded",e,!1),Q.ie&&Q.win&&(F.attachEvent(P,function(){"complete"==F.readyState&&(F.detachEvent(P,arguments.callee),e())}),M==top&&function(){if(!U){try{F.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0}e()}}()),Q.wk&&function(){return U?void 0:/loaded|complete/.test(F.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(e)))}(),function(){Q.ie&&Q.win&&window.attachEvent("onunload",function(){for(var e=q.length,t=0;e>t;t++)q[t][0].detachEvent(q[t][1],q[t][2]);for(var n=j.length,i=0;n>i;i++)p(j[i]);for(var s in Q)Q[s]=null;Q=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}(),{registerObject:function(e,t,n,i){if(Q.w3&&e&&t){var s={};s.id=e,s.swfVersion=t,s.expressInstall=n,s.callbackFn=i,B[B.length]=s,b(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return Q.w3?o(e):void 0},embedSWF:function(e,n,i,s,r,o,h,l,d,p){var g={success:!1,id:n};Q.w3&&!(Q.wk&&312>Q.wk)&&e&&n&&i&&s&&r?(b(n,!1),t(function(){i+="",s+="";var t={};if(d&&typeof d===T)for(var f in d)t[f]=d[f];t.data=e,t.width=i,t.height=s;var m={};if(l&&typeof l===T)for(var _ in l)m[_]=l[_];if(h&&typeof h===T)for(var v in h)typeof m.flashvars!=k?m.flashvars+="&"+v+"="+h[v]:m.flashvars=v+"="+h[v];if(C(r)){var S=u(t,m,n);t.id==n&&b(n,!0),g.success=!0,g.ref=S}else{if(o&&a())return t.data=o,c(t,m,n,p),void 0;b(n,!0)}p&&p(g)})):p&&p(g)},switchOffAutoHideShow:function(){$=!1},ua:Q,getFlashPlayerVersion:function(){return{major:Q.pv[0],minor:Q.pv[1],release:Q.pv[2]}
},hasFlashPlayerVersion:C,createSWF:function(e,t,n){return Q.w3?u(e,t,n):void 0},showExpressInstall:function(e,t,n,i){Q.w3&&a()&&c(e,t,n,i)},removeSWF:function(e){Q.w3&&p(e)},createCSS:function(e,t,n,i){Q.w3&&v(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=F.location.search||F.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return S(t);for(var n=t.split("&"),i=0;n.length>i;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return S(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(G){var e=f(R);e&&y&&(e.parentNode.replaceChild(y,e),J&&(b(J,!0),Q.ie&&Q.win&&(y.style.display="block")),E&&E(D)),G=!1}}}}(),DOMStorageAdaptor=function(e){for(var t in LawnchairAdaptorHelpers)this[t]=LawnchairAdaptorHelpers[t];this.init(e)};DOMStorageAdaptor.prototype={init:function(e){var t=this;this.storage=this.merge(window.localStorage,e.storage),this.table=this.merge("field",e.table),void 0!==this.storage&&window.Storage||(this.storage=function(){var e=window.top.name?t.deserialize(window.top.name):{};return{setItem:function(n,i){e[n]=i+"",window.top.name=t.serialize(e)},removeItem:function(n){delete e[n],window.top.name=t.serialize(e)},getItem:function(t){return e[t]||null},clear:function(){e={},window.top.name=""}}}())},save:function(e,t){var n=this.table+"::"+(e.key||this.uuid());delete e.key,this.storage.setItem(n,this.serialize(e)),t&&(e.key=n.split("::")[1],t(e))},get:function(e,t){var n=this.deserialize(this.storage.getItem(this.table+"::"+e)),i=this.terseToVerboseCallback(t);n?(n.key=e,t&&i(n)):t&&i(null)},all:function(e){for(var t=this.terseToVerboseCallback(e),n=[],i=0,s=this.storage.length;s>i;++i){var r=this.storage.key(i),o=r.split("::")[0],a=r.split("::").slice(1).join("::");if(o==this.table){var c=this.deserialize(this.storage.getItem(r));c.key=a,n.push(c)}}t&&t(n)},remove:function(e,t){var n=this.table+"::"+("string"==typeof e?e:e.key);this.storage.removeItem(n),t&&t()},nuke:function(e){var t=this;this.all(function(n){for(var i=0,s=n.length;s>i;i++)t.remove(n[i]);e&&e()})}};var UserDataAdaptor=function(e){for(var t in LawnchairAdaptorHelpers)this[t]=LawnchairAdaptorHelpers[t];this.init(e)};UserDataAdaptor.prototype={init:function(){var e=document.createElement("span");e.style.behavior="url('#default#userData')",e.style.position="absolute",e.style.left=1e4,document.body.appendChild(e),this.storage=e,this.storage.load("lawnchair")},get:function(e,t){var n=this.deserialize(this.storage.getAttribute(e));n&&(n.key=e),t&&t(n)},save:function(e,t){var n=e.key||"lc"+this.uuid();delete e.key,this.storage.setAttribute(n,this.serialize(e)),this.storage.save("lawnchair"),t&&(e.key=n,t(e))},all:function(e){for(var t,n,i=this.terseToVerboseCallback(e),s=this.storage.XMLDocument.firstChild.attributes,r=[],o=0,a=s.length;a>o;o++)t=s[o],n=this.deserialize(t.nodeValue),n&&(n.key=t.nodeName,r.push(n));i&&i(r)},remove:function(e,t){var n="string"==typeof e?e:e.key;this.storage.removeAttribute(n),this.storage.save("lawnchair"),t&&t()},nuke:function(e){var t=this;this.all(function(n){for(var i=0,s=n.length;s>i;i++)n[i].key&&t.remove(n[i].key);e&&e()})}};var LawnchairAdaptorHelpers={merge:function(e,t){return void 0==t||null==t?e:t},terseToVerboseCallback:function(callback){return"string"==typeof arguments[0]?function(r,i){eval(callback)}:callback},now:function(){return(new Date).getTime()},uuid:function(e,t){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];if(t=t||n.length,e)for(var s=0;e>s;s++)i[s]=n[0|Math.random()*t];else{var r;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(var s=0;36>s;s++)i[s]||(r=0|16*Math.random(),i[s]=n[19==s?8|3&r:r])}return i.join("")},serialize:function(e){var t="";return t=JSON.stringify(e)},deserialize:function(json){return eval("("+json+")")}},Lawnchair=function(e){this.init(e)};Lawnchair.prototype={init:function(e){var t={webkit:window.WebkitSQLiteAdaptor,gears:window.GearsSQLiteAdaptor,dom:window.DOMStorageAdaptor,cookie:window.CookieAdaptor,air:window.AIRSQLiteAdaptor,userdata:window.UserDataAdaptor,"air-async":window.AIRSQLiteAsyncAdaptor,blackberry:window.BlackBerryPersistentStorageAdaptor};if(this.adaptor=e.adaptor?new t[e.adaptor](e):new WebkitSQLiteAdaptor(e),!JSON||!JSON.stringify)throw"Native JSON functions unavailable - please include http://www.json.org/json2.js or run on a decent browser :P"},save:function(e,t){this.adaptor.save(e,t)},get:function(e,t){this.adaptor.get(e,t)},exists:function(e){this.adaptor.exists(e)},all:function(e){this.adaptor.all(e)},remove:function(e,t){this.adaptor.remove(e,t)},nuke:function(e){return this.adaptor.nuke(e),this},paged:function(e,t){this.adaptor.paged(e,t)},find:function(condition,callback){var is="string"==typeof condition?function(r){return eval(condition)}:condition,cb=this.adaptor.terseToVerboseCallback(callback);this.each(function(e,t){is(e)&&cb(e,t)})},each:function(e){var t=this.adaptor.terseToVerboseCallback(e);this.all(function(e){for(var n=e.length,i=0;n>i;i++)t(e[i],i)})}};